<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning & Study Hub with Shinchan</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<style>
/* Dark Theme Variables */
:root {
    --primary-color: #6c5ce7;
    --secondary-color: #a8a4e6;
    --background-color: #1a1a1a;
    --surface-color: #2d2d2d;
    --text-color: #ffffff;
    --text-secondary: #b3b3b3;
    --accent-color: #00b894;
    --error-color: #ff7675;
    --success-color: #00b894;
    --card-bg: #363636;
    --hover-color: #3d3d3d;
}

/* Global Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
}

body {
    background-color: var(--background-color);
    color: var(--text-color);
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
}

/* Background Video */
.background-video {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: -1;
    opacity: 0.8;
    filter: brightness(1) contrast(1.1);
}

/* Add a dark overlay to improve content visibility */
body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        135deg,
        rgba(26, 26, 26, 0.3),
        rgba(26, 26, 26, 0.2)
    );
    z-index: -1;
    backdrop-filter: blur(3px);
}

/* Container */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
    position: relative;
    z-index: 1;
    background: rgba(26, 26, 26, 0.2);
    border-radius: 20px;
    backdrop-filter: blur(5px);
}

/* Section Styles */
.section {
    width: 100%;
    min-height: 100vh;
    padding: 2rem;
    display: none;
}

.section.active {
    display: block;
}

/* Make sure home section is visible by default */
#home-section {
    display: block;
}

/* Dashboard Layout */
#dashboard-section {
    display: none;
}

#dashboard-section.active {
    display: flex !important;
}

/* Dashboard Content */
.dashboard-content {
    display: none;
    padding: 20px;
    background: var(--surface-color);
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    width: 100%;
}

.dashboard-content.active {
    display: block !important;
}

/* Utility Classes */
.hidden {
    display: none !important;
}

/* Home Page Styles */
.home-content {
    text-align: center;
    padding: 2rem;
    max-width: 800px;
    margin: 0 auto;
    position: relative;
    z-index: 1;
}

.shinchan-avatar {
    width: 120px;
    height: 120px;
    margin: 0 auto 2rem;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
}

.shinchan-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.intro-text {
    font-size: 1.4rem;
    color: var(--text-secondary);
    margin-bottom: 2rem;
    line-height: 1.8;
    text-shadow: 0 0 10px rgba(108, 92, 231, 0.3);
}

/* Features Grid */
.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
    margin: 2rem 0;
    padding: 0 1rem;
}

.feature-card {
    background: rgba(54, 54, 54, 0.9);
    padding: 2rem;
    border-radius: 20px;
    text-align: center;
    transition: all 0.3s ease;
    animation: fadeIn 0.5s ease forwards;
    border: 1px solid rgba(108, 92, 231, 0.3);
    backdrop-filter: blur(10px);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}

.feature-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
    border-color: var(--primary-color);
}

.feature-card i {
    font-size: 3rem;
    color: var(--primary-color);
    margin-bottom: 1.5rem;
    text-shadow: 0 0 10px rgba(108, 92, 231, 0.5);
}

.feature-card h3 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
    color: var(--text-color);
}

.feature-card p {
    color: var(--text-secondary);
    line-height: 1.6;
}

.login-to-access {
    display: inline-block;
    margin-top: 1rem;
    padding: 0.5rem 1rem;
    background: rgba(108, 92, 231, 0.2);
    color: var(--primary-color);
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 500;
    border: 1px solid rgba(108, 92, 231, 0.3);
}

.feature-card:hover .login-to-access {
    background: rgba(108, 92, 231, 0.3);
    transform: translateY(-2px);
    transition: all 0.3s ease;
}

/* Auth Section Styles */
#auth-section {
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 2rem;
}

.auth-container {
    max-width: 450px;
    width: 90%;
    margin: 2rem auto;
    padding: 2.5rem;
    background: rgba(45, 45, 45, 0.9);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
}

.auth-container h2 {
    font-size: 2.2rem;
    margin-bottom: 2rem;
    color: var(--text-color);
    text-align: center;
    letter-spacing: 1px;
}

.auth-forms {
    width: 100%;
}

#login-form,
#register-form {
    display: none;
}

#login-form.active,
#register-form.active {
    display: block;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    color: var(--text-color);
    font-weight: 500;
}

.form-group input {
    width: 100%;
    padding: 0.75rem;
    background: var(--card-bg);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    color: var(--text-color);
    font-size: 1rem;
}

.form-group input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(108, 92, 231, 0.1);
}

.auth-forms button[type="submit"] {
    width: 100%;
    padding: 1rem;
    background: var(--primary-color);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 1rem;
}

.auth-forms button[type="submit"]:hover {
    background: var(--secondary-color);
    transform: translateY(-2px);
}

.toggle-form {
    text-align: center;
    margin-top: 1.5rem;
    color: var(--text-secondary);
}

.toggle-form a {
    color: var(--primary-color);
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s ease;
}

.toggle-form a:hover {
    color: var(--secondary-color);
}

.error-message,
.success-message {
    padding: 1rem;
    border-radius: 8px;
    margin-bottom: 1.5rem;
    text-align: center;
    font-weight: 500;
}

.error-message {
    background: rgba(255, 118, 117, 0.1);
    color: var(--error-color);
    border: 1px solid var(--error-color);
}

.success-message {
    background: rgba(0, 184, 148, 0.1);
    color: var(--success-color);
    border: 1px solid var(--success-color);
}

/* Dashboard */
.sidebar {
    background: var(--surface-color);
    width: 250px;
    height: 100vh;
    position: fixed;
    left: 0;
    top: 0;
    padding: 2rem;
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
}

.user-profile {
    text-align: center;
    margin-bottom: 2rem;
}

.avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    margin-bottom: 1rem;
}

.nav-links {
    list-style: none;
}

.nav-links li {
    padding: 1rem 1.5rem;
    margin: 0.5rem 0;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 1rem;
    color: var(--text-color);
}

.nav-links li i {
    width: 20px;
    text-align: center;
}

.nav-links li:hover {
    background: var(--hover-color);
    transform: translateX(5px);
}

.nav-links li.active {
    background: var(--primary-color);
    color: white;
}

.nav-links li.logout {
    color: var(--error-color);
}

.main-content {
    margin-left: 250px;
    padding: 2rem;
}

.top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
}

.search-bar {
    position: relative;
    width: 300px;
}

.search-bar input {
    width: 100%;
    padding: 0.8rem 1rem;
    border: none;
    border-radius: 8px;
    background: var(--card-bg);
    color: var(--text-color);
}

.search-bar i {
    position: absolute;
    right: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-secondary);
}

/* Dashboard Grid */
.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    padding: 1rem;
}

.stats-card {
    background: var(--card-bg);
    padding: 1.5rem;
    border-radius: 15px;
    text-align: center;
    transition: transform 0.3s ease;
    border: 1px solid rgba(108, 92, 231, 0.3);
    backdrop-filter: blur(10px);
}

.stats-card:hover {
    transform: translateY(-5px);
    border-color: var(--primary-color);
}

.stats-card i {
    font-size: 2rem;
    color: var(--primary-color);
    margin-bottom: 1rem;
    text-shadow: 0 0 10px rgba(108, 92, 231, 0.5);
}

.count {
    font-size: 2rem;
    font-weight: bold;
    color: var(--accent-color);
}

/* Dashboard Feature Cards */
.dashboard-grid .feature-card {
    background: var(--card-bg);
    padding: 1.5rem;
    border-radius: 15px;
    text-align: center;
    transition: all 0.3s ease;
    border: 1px solid rgba(108, 92, 231, 0.3);
    backdrop-filter: blur(10px);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    min-height: 200px;
}

.dashboard-grid .feature-card:hover {
    transform: translateY(-5px);
    border-color: var(--primary-color);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
}

.dashboard-grid .feature-card i {
    font-size: 2rem;
    color: var(--primary-color);
    margin-bottom: 1rem;
    text-shadow: 0 0 10px rgba(108, 92, 231, 0.5);
}

.dashboard-grid .feature-card h3 {
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
    color: var(--text-color);
}

.dashboard-grid .feature-card p {
    color: var(--text-secondary);
    margin-bottom: 1rem;
    flex-grow: 1;
}

.dashboard-grid .feature-card .btn-primary {
    width: 100%;
    margin-top: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.8rem;
    background: var(--primary-color);
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.dashboard-grid .feature-card .btn-primary:hover {
    background: var(--secondary-color);
    transform: translateY(-2px);
}

.dashboard-grid .feature-card .btn-primary i {
    font-size: 1rem;
    margin: 0;
    text-shadow: none;
}

/* Course and Note Cards */
.course-card, .note-card {
    background: var(--card-bg);
    padding: 1.5rem;
    border-radius: 15px;
    margin-bottom: 1rem;
    transition: transform 0.3s ease;
}

.course-card:hover, .note-card:hover {
    transform: translateY(-5px);
}

.status {
    display: inline-block;
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    font-size: 0.8rem;
    margin: 0.5rem 0;
}

.status.in-progress {
    background: var(--primary-color);
    color: white;
}

.status.completed {
    background: var(--success-color);
    color: white;
}

/* Buttons */
.btn-primary {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.8rem 1.5rem;
    background: var(--primary-color);
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-primary:hover {
    background: var(--secondary-color);
    transform: translateY(-2px);
}

.btn-primary i {
    font-size: 1rem;
}

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    justify-content: center;
    align-items: center;
}

.modal:not(.hidden) {
    display: flex;
}

.modal-content {
    background: var(--surface-color);
    padding: 2rem;
    border-radius: 12px;
    width: 90%;
    max-width: 600px;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    z-index: 1001;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.modal form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.modal .form-group {
    margin-bottom: 1rem;
}

.modal .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    color: var(--text-color);
    font-weight: 500;
}

.modal .form-group input,
.modal .form-group select,
.modal .form-group textarea {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    background: var(--card-bg);
    color: var(--text-color);
    font-size: 1rem;
}

.modal .form-group input:focus,
.modal .form-group select:focus,
.modal .form-group textarea:focus {
    outline: none;
    border-color: var(--primary-color);
}

.modal button[type="submit"] {
    background: var(--primary-color);
    color: white;
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 6px;
    font-size: 1rem;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-top: 1rem;
    width: 100%;
}

.modal button[type="submit"]:hover {
    background: var(--secondary-color);
}

/* Responsive Design */
@media (max-width: 768px) {
    .sidebar {
        width: 100%;
        height: auto;
        position: relative;
        margin-bottom: 2rem;
    }

    .main-content {
        margin-left: 0;
    }

    .features-grid {
        grid-template-columns: 1fr;
    }

    .search-bar {
        width: 100%;
    }

    .auth-container {
        width: 95%;
        padding: 2rem;
    }

    .auth-container h2 {
        font-size: 2.2rem;
    }

    .form-group input {
        font-size: 1rem;
        padding: 1rem;
    }

    .auth-container button[type="submit"] {
        font-size: 1.1rem;
        padding: 1rem;
    }

    .shinchan-avatar {
        width: 150px;
        height: 150px;
    }

    .dashboard-grid {
        grid-template-columns: 1fr;
    }
    
    .dashboard-grid .feature-card {
        min-height: 180px;
    }
}

@media (max-width: 480px) {
    .auth-container {
        padding: 1.5rem;
    }

    .auth-container h2 {
        font-size: 1.8rem;
    }

    .form-group input {
        font-size: 0.9rem;
    }

    .auth-container button[type="submit"] {
        font-size: 1rem;
    }

    .shinchan-avatar {
        width: 120px;
        height: 120px;
    }
}

/* Settings Form */
.settings-form {
    max-width: 600px;
    margin: 2rem auto;
    padding: 2rem;
    background: var(--surface-color);
    border-radius: 15px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.settings-form .form-group {
    margin-bottom: 1.5rem;
}

.settings-form label {
    display: block;
    margin-bottom: 0.5rem;
    color: var(--text-color);
}

.settings-form input {
    width: 100%;
    padding: 0.8rem;
    background: var(--card-bg);
    border: 1px solid var(--hover-color);
    border-radius: 8px;
    color: var(--text-color);
}

.settings-form input:focus {
    border-color: var(--primary-color);
    outline: none;
}

/* Course Management Styles */
.course-filters {
    display: flex;
    gap: 1rem;
    margin-right: 1rem;
}

.filter-select {
    padding: 0.5rem;
    border-radius: 8px;
    background: var(--card-bg);
    color: var(--text-color);
    border: 1px solid var(--hover-color);
    cursor: pointer;
}

.filter-select:focus {
    outline: none;
    border-color: var(--primary-color);
}

.courses-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
    padding: 1rem;
}

/* Customize scrollbar */
.courses-grid::-webkit-scrollbar {
    width: 8px;
}

.courses-grid::-webkit-scrollbar-track {
    background: var(--surface-color);
    border-radius: 4px;
}

.courses-grid::-webkit-scrollbar-thumb {
    background: var(--primary-color);
    border-radius: 4px;
}

.courses-grid::-webkit-scrollbar-thumb:hover {
    background: var(--secondary-color);
}

/* Course Card Styles */
.course-card {
    background: var(--card-bg);
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.course-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 12px rgba(0, 0, 0, 0.15);
}

.course-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1rem;
}

.course-header h3 {
    font-size: 1.2rem;
    margin: 0;
    color: var(--text-color);
}

.course-actions {
    display: flex;
    gap: 0.5rem;
}

.course-actions button {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0.25rem;
    transition: color 0.3s ease;
}

.course-actions .btn-edit:hover {
    color: var(--primary-color);
}

.course-actions .btn-delete:hover {
    color: var(--error-color);
}

.course-body {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.course-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--primary-color);
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s ease;
}

.course-link:hover {
    color: var(--secondary-color);
}

.course-info {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.badge {
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 500;
}

.badge.platform {
    background: rgba(108, 92, 231, 0.2);
    color: var(--primary-color);
}

.badge.category {
    background: rgba(0, 184, 148, 0.2);
    color: var(--success-color);
}

.badge.difficulty {
    background: rgba(255, 118, 117, 0.2);
    color: var(--error-color);
}

.badge.priority {
    background: rgba(253, 203, 110, 0.2);
    color: #fdcb6e;
}

.badge.status {
    background: rgba(45, 52, 54, 0.2);
    color: var(--text-color);
}

.course-progress {
    margin-top: 1rem;
}

.progress-bar {
    width: 100%;
    height: 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    overflow: hidden;
}

.progress {
    height: 100%;
    background: var(--primary-color);
    border-radius: 3px;
    transition: width 0.3s ease;
}

.progress-text {
    display: block;
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-top: 0.5rem;
}

.course-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 0.5rem;
}

.tag {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-secondary);
    padding: 0.25rem 0.75rem;
    border-radius: 15px;
    font-size: 0.85rem;
}

.course-notes {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.course-notes p {
    color: var(--text-secondary);
    font-size: 0.9rem;
    line-height: 1.5;
    margin: 0;
}

.empty-state {
    text-align: center;
    padding: 3rem;
    color: var(--text-secondary);
}

.empty-state h3 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
    color: var(--text-color);
}

/* Notification Styles */
.notification {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 1rem 1.5rem;
    border-radius: 8px;
    background: var(--surface-color);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    z-index: 1100;
    animation: slideIn 0.3s ease forwards;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    min-width: 300px;
    max-width: 400px;
}

.notification-content {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex: 1;
}

.notification i {
    font-size: 1.25rem;
}

.notification.success {
    background: var(--success-color);
    color: white;
}

.notification.error {
    background: var(--error-color);
    color: white;
}

.notification.info {
    background: var(--primary-color);
    color: white;
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOut {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

/* Notes Section Styles */
.notes-container {
    padding: 20px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    backdrop-filter: blur(10px);
}

.notes-filters {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
}

.search-box {
    flex: 1;
    position: relative;
}

.search-box input {
    width: 100%;
    padding: 10px 15px 10px 40px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 5px;
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
}

.search-box i {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: rgba(255, 255, 255, 0.5);
}

#notes-category-filter {
    padding: 10px 15px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 5px;
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    min-width: 150px;
}

.notes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
}

.note-card {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    padding: 20px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    transition: transform 0.2s, box-shadow 0.2s;
    cursor: move;
}

.note-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.note-card.dragging {
    opacity: 0.5;
    background: rgba(255, 255, 255, 0.2);
}

.note-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 15px;
}

.note-header h3 {
    margin: 0;
    color: #fff;
    font-size: 1.2em;
}

.note-content {
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 15px;
    line-height: 1.5;
}

.note-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 15px;
}

.note-category {
    background: rgba(255, 255, 255, 0.2);
    padding: 5px 10px;
    border-radius: 15px;
    font-size: 0.9em;
    color: #fff;
}

.note-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
}

.tag {
    background: rgba(255, 255, 255, 0.1);
    padding: 3px 8px;
    border-radius: 12px;
    font-size: 0.8em;
    color: rgba(255, 255, 255, 0.8);
}

.note-attachments {
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.note-attachments h4 {
    color: #fff;
    margin: 0 0 10px 0;
    font-size: 1em;
}

.attachment-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.attachment-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 5px;
    color: #fff;
}

.attachment-item i {
    color: #ff6b6b;
}

.attachment-item a {
    color: #fff;
    text-decoration: none;
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.attachment-item a:hover {
    text-decoration: underline;
}

/* File Upload Styles */
.file-upload-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
}

.file-upload {
    border: 2px dashed rgba(255, 255, 255, 0.3);
    border-radius: 10px;
    padding: 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
}

.file-upload:hover,
.file-upload.dragover {
    border-color: #ff6b6b;
    background: rgba(255, 107, 107, 0.1);
}

.file-upload i {
    font-size: 2em;
    color: #ff6b6b;
    margin-bottom: 10px;
}

.file-upload p {
    color: rgba(255, 255, 255, 0.8);
    margin: 0;
}

.file-upload input[type="file"] {
    display: none;
}

.upload-preview {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 10px;
    margin-top: 10px;
}

.upload-preview .attachment-item {
    position: relative;
}

.upload-preview .attachment-item img {
    width: 100%;
    height: 100px;
    object-fit: cover;
    border-radius: 5px;
}

.remove-file {
    position: absolute;
    top: 5px;
    right: 5px;
    background: rgba(255, 0, 0, 0.7);
    color: #fff;
    border: none;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 12px;
}

.remove-file:hover {
    background: rgba(255, 0, 0, 0.9);
}

/* Chat Styles */
.chat-container {
    display: flex;
    flex-direction: column;
    height: 400px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    overflow: hidden;
}

.chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.message {
    max-width: 80%;
    padding: 10px 15px;
    border-radius: 15px;
    line-height: 1.4;
}

.message.user {
    background: var(--primary-color);
    color: white;
    align-self: flex-end;
    border-bottom-right-radius: 5px;
}

.message.ai {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    align-self: flex-start;
    border-bottom-left-radius: 5px;
}

.chat-input {
    display: flex;
    gap: 10px;
    padding: 15px;
    background: rgba(255, 255, 255, 0.05);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.chat-input input {
    flex: 1;
    padding: 10px 15px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    background: rgba(255, 255, 255, 0.1);
    color: white;
}

.chat-input button {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border: none;
    background: var(--primary-color);
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
}

.chat-input button:hover {
    background: var(--secondary-color);
    transform: scale(1.05);
}

/* Timer Styles */
.timer-container {
    text-align: center;
    padding: 20px;
}

.timer-display {
    font-size: 4rem;
    font-weight: bold;
    color: var(--primary-color);
    margin: 20px 0;
    text-shadow: 0 0 10px rgba(108, 92, 231, 0.3);
}

.timer-controls {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin: 20px 0;
}

.timer-settings {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-top: 20px;
}

.timer-settings input {
    width: 100%;
    padding: 8px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 5px;
    background: rgba(255, 255, 255, 0.1);
    color: white;
}

/* Reminder Form Styles */
#reminder-form {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

#reminder-form input[type="datetime-local"] {
    width: 100%;
    padding: 10px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 5px;
    background: rgba(255, 255, 255, 0.1);
    color: white;
}

#reminder-form textarea {
    min-height: 100px;
    resize: vertical;
}

/* Feature Card Button Styles */
.feature-card .btn-primary {
    margin-top: 15px;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.feature-card .btn-primary i {
    font-size: 1rem;
}

/* AI Assistant Section */
#ai-assistant-content {
    height: calc(100vh - 60px);
    display: flex;
    flex-direction: column;
}

#ai-assistant-content .chat-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    margin: 20px;
    overflow: hidden;
}

#ai-assistant-content .chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
}

#ai-assistant-content .chat-input {
    display: flex;
    gap: 10px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.1);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

#ai-assistant-content .chat-input input {
    flex: 1;
    padding: 12px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 5px;
    background: rgba(255, 255, 255, 0.05);
    color: var(--text-color);
}

#ai-assistant-content .chat-input button {
    padding: 12px 20px;
    background: var(--primary-color);
    border: none;
    border-radius: 5px;
    color: white;
    cursor: pointer;
    transition: background 0.3s ease;
}

#ai-assistant-content .chat-input button:hover {
    background: var(--primary-color-dark);
}

/* Reminders Section Styles */
#reminders-content {
    padding: 20px;
}

#reminders-content .top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.reminders-list {
    display: grid;
    gap: 20px;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
}

.reminder-card {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    padding: 20px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.reminder-card h3 {
    margin: 0 0 10px 0;
    color: var(--primary-color);
}

.reminder-card .datetime {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-bottom: 10px;
}

.reminder-card .description {
    color: var(--text-color);
    margin-bottom: 15px;
}

.reminder-card .actions {
    display: flex;
    gap: 10px;
}

/* Pomodoro Section */
#pomodoro-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: calc(100vh - 60px);
    padding: 20px;
}

#pomodoro-content .timer-container {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 15px;
    padding: 40px;
    text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.1);
    max-width: 500px;
    width: 100%;
}

#pomodoro-content .timer-display {
    font-size: 4rem;
    font-weight: bold;
    color: var(--primary-color);
    margin-bottom: 30px;
    font-family: monospace;
}

#pomodoro-content .timer-controls {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-bottom: 30px;
}

#pomodoro-content .timer-settings {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-top: 30px;
}

#pomodoro-content .form-group {
    text-align: left;
}

#pomodoro-content .form-group label {
    display: block;
    margin-bottom: 8px;
    color: var(--text-secondary);
}

#pomodoro-content .form-group input {
    width: 100%;
    padding: 10px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 5px;
    background: rgba(255, 255, 255, 0.05);
    color: var(--text-color);
}

/* Responsive Design */
@media (max-width: 768px) {
    #pomodoro-content .timer-container {
        padding: 20px;
    }

    #pomodoro-content .timer-display {
        font-size: 3rem;
    }

    #pomodoro-content .timer-settings {
        grid-template-columns: 1fr;
    }

    .reminders-list {
        grid-template-columns: 1fr;
    }
}

/* Study Groups Styles */
.groups-container {
    padding: 20px;
}

.groups-filters {
    margin-bottom: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
}

.groups-filters .search-box {
    flex: 1;
    max-width: 400px;
    position: relative;
}

.groups-filters .search-box input {
    width: 100%;
    padding: 10px 40px 10px 15px;
    border: 1px solid var(--border-color);
    border-radius: 5px;
    font-size: 14px;
}

.groups-filters .search-box i {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-muted);
}

.filter-buttons {
    display: flex;
    gap: 10px;
}

.groups-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
}

.group-card {
    background: var(--card-bg);
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s;
}

.group-card:hover {
    transform: translateY(-5px);
}

.group-card h3 {
    margin: 0 0 10px 0;
    color: var(--text-primary);
}

.group-card p {
    color: var(--text-muted);
    margin-bottom: 15px;
    font-size: 14px;
}

.group-card .group-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    font-size: 12px;
    color: var(--text-muted);
}

.group-card .group-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    margin-bottom: 15px;
}

.group-card .tag {
    background: var(--primary-color-light);
    color: var(--primary-color);
    padding: 4px 8px;
    border-radius: 15px;
    font-size: 12px;
}

.group-card .group-actions {
    display: flex;
    gap: 10px;
}

/* Discussion Modal Styles */
.discussion-container {
    display: flex;
    flex-direction: column;
    height: 500px;
}

.discussion-messages {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
    background: var(--card-bg);
    border-radius: 5px;
    margin-bottom: 20px;
}

.message {
    margin-bottom: 15px;
    padding: 10px;
    border-radius: 5px;
    background: var(--bg-light);
}

.message .message-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
    font-size: 12px;
    color: var(--text-muted);
}

.message .message-content {
    color: var(--text-primary);
}

.discussion-input {
    padding: 20px;
    background: var(--card-bg);
    border-radius: 5px;
}

.discussion-input form {
    display: flex;
    gap: 10px;
}

.discussion-input textarea {
    flex: 1;
    padding: 10px;
    border: 1px solid var(--border-color);
    border-radius: 5px;
    resize: none;
    height: 60px;
}

/* Responsive Styles */
@media (max-width: 768px) {
    .groups-filters {
        flex-direction: column;
        align-items: stretch;
    }

    .groups-filters .search-box {
        max-width: none;
    }

    .filter-buttons {
        flex-wrap: wrap;
    }

    .groups-grid {
        grid-template-columns: 1fr;
    }

    .discussion-input form {
        flex-direction: column;
    }

    .discussion-input textarea {
        width: 100%;
    }
}

/* Platforms Section Styles */
#platforms-content {
    padding: 2rem;
}

.platform-filters {
    display: flex;
    gap: 1rem;
    margin: 1rem 0;
    flex-wrap: wrap;
}

.btn-filter {
    padding: 0.5rem 1rem;
    border: 1px solid var(--border-color);
    border-radius: 20px;
    background: transparent;
    color: var(--text-color);
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-filter:hover,
.btn-filter.active {
    background: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

.platforms-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1.5rem;
    margin: 2rem 0;
}

.platform-card {
    background: var(--card-bg);
    border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
    position: relative;
}

.platform-card:hover {
    transform: translateY(-5px);
}

.platform-card h3 {
    margin: 0 0 1rem 0;
    color: var(--heading-color);
}

.platform-card .platform-icon {
    font-size: 2rem;
    margin-bottom: 1rem;
    color: var(--primary-color);
}

.platform-card .favorite-btn {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: transparent;
    border: none;
    color: #ffd700;
    cursor: pointer;
    font-size: 1.2rem;
}

.platform-card .platform-link {
    display: inline-block;
    margin-top: 1rem;
    padding: 0.5rem 1rem;
    background: var(--primary-color);
    color: white;
    text-decoration: none;
    border-radius: 5px;
    transition: background 0.3s ease;
}

.platform-card .platform-link:hover {
    background: var(--primary-dark);
}

/* Contests Section Styles */
.contests-section {
    margin-top: 3rem;
}

.contests-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-top: 1.5rem;
}

.contest-card {
    background: var(--card-bg);
    border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.contest-card h4 {
    margin: 0 0 1rem 0;
    color: var(--heading-color);
}

.contest-card .contest-details {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.contest-card .contest-detail {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-color);
}

.contest-card .contest-link {
    display: inline-block;
    margin-top: 1rem;
    padding: 0.5rem 1rem;
    background: var(--primary-color);
    color: white;
    text-decoration: none;
    border-radius: 5px;
    transition: background 0.3s ease;
}

.contest-card .contest-link:hover {
    background: var(--primary-dark);
}

/* ... existing code ... */ </style>

</head>
<body>
    <video class="background-video" autoplay muted loop playsinline>
        <source src="https://cdn.pixabay.com/video/2018/11/01/19045-298313358_large.mp4" type="video/mp4">
    </video>
    
    <div class="container">
        <!-- Home Page Section -->
        <div id="home-section" class="section">
            <div class="home-content">
                <div class="shinchan-avatar">
                    <img src="images/shinchan.png" alt="Shinchan">
                </div>
                <h1>Welcome to Learning Hub!</h1>
                <p class="intro-text">Your one-stop platform for managing all your learning resources. 
                Organize courses, take notes, and track your progress with our fun Shinchan-themed interface!</p>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <i class="fas fa-book"></i>
                        <h3>Course Management</h3>
                        <p>Organize all your courses in one place</p>
                        <span class="login-to-access">Login to Access</span>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-sticky-note"></i>
                        <h3>Study Notes</h3>
                        <p>Save and organize your study materials</p>
                        <span class="login-to-access">Login to Access</span>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-bookmark"></i>
                        <h3>Smart Bookmarks</h3>
                        <p>Never lose important information</p>
                        <span class="login-to-access">Login to Access</span>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-chart-line"></i>
                        <h3>Progress Tracking</h3>
                        <p>Monitor your learning journey</p>
                        <span class="login-to-access">Login to Access</span>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-robot"></i>
                        <h3>AI Study Assistant</h3>
                        <p>Get instant help with your studies using our AI chatbot</p>
                        <span class="login-to-access">Login to Access</span>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-bell"></i>
                        <h3>Study Reminders</h3>
                        <p>Set up automated reminders for your study sessions</p>
                        <span class="login-to-access">Login to Access</span>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-clock"></i>
                        <h3>Pomodoro Timer</h3>
                        <p>Stay focused with our built-in study timer</p>
                        <span class="login-to-access">Login to Access</span>
                    </div>
                </div>

                <div class="auth-buttons">
                    <button class="btn-primary" id="get-started-btn">Get Started</button>
                </div>
            </div>
        </div>

        <!-- Auth Section -->
        <div class="section" id="auth-section">
            <div class="auth-container">
                <div class="shinchan-avatar">
                    <img src="images/avatar.jpeg" alt="Avatar">
                </div>
                <h2>Welcome Back!</h2>
                <div class="auth-forms">
                    <form id="login-form">
                        <div class="form-group">
                            <label for="login-email">Email</label>
                            <input type="email" id="login-email" required>
                        </div>
                        <div class="form-group">
                            <label for="login-password">Password</label>
                            <input type="password" id="login-password" required>
                        </div>
                        <button type="submit">Login</button>
                        <p class="toggle-form">Don't have an account? <a href="#" id="show-register">Register</a></p>
                    </form>
                    
                    <form id="register-form">
                        <div class="form-group">
                            <label for="register-username">Username</label>
                            <input type="text" id="register-username" required>
                        </div>
                        <div class="form-group">
                            <label for="register-email">Email</label>
                            <input type="email" id="register-email" required>
                        </div>
                        <div class="form-group">
                            <label for="register-password">Password</label>
                            <input type="password" id="register-password" required>
                        </div>
                        <button type="submit">Register</button>
                        <p class="toggle-form">Already have an account? <a href="#" id="show-login">Login</a></p>
                    </form>
                </div>
                <button id="back-to-home" class="btn-back">Back to Home</button>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboard-section" class="section hidden">
            <div class="sidebar">
                <div class="user-profile">
                    <img src="images/avatar.jpeg" alt="User Avatar" class="avatar">
                    <h3 class="user-name">Welcome, <span id="display-username">User</span></h3>
                </div>
                <ul class="nav-links">
                    <li class="active" data-section="dashboard-content">
                        <i class="fas fa-home"></i>
                        <span>Dashboard</span>
                    </li>
                    <li data-section="courses-content">
                        <i class="fas fa-book"></i>
                        <span>Courses</span>
                    </li>
                    <li data-section="notes-content">
                        <i class="fas fa-sticky-note"></i>
                        <span>Notes</span>
                    </li>
                    <li data-section="bookmarks-content">
                        <i class="fas fa-bookmark"></i>
                        <span>Bookmarks</span>
                    </li>
                    <li data-section="ai-assistant-content">
                        <i class="fas fa-robot"></i>
                        <span>AI Assistant</span>
                    </li>
                    <li data-section="reminders-content">
                        <i class="fas fa-bell"></i>
                        <span>Reminders</span>
                    </li>
                    <li data-section="pomodoro-content">
                        <i class="fas fa-clock"></i>
                        <span>Pomodoro</span>
                    </li>
                    <li data-section="study-groups-content">
                        <i class="fas fa-users"></i>
                        <span>Study Groups</span>
                    </li>
                    <li data-section="settings-content">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </li>
                    <li data-section="platforms-content">
                        <i class="fas fa-globe"></i>
                        <span>Quick Access</span>
                    </li>
                    <li class="logout" id="logout-btn">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </li>
                </ul>
            </div>
            
            <div class="main-content">
                <!-- Dashboard Home Section -->
                <div id="dashboard-content" class="dashboard-content active">
                    <div class="top-bar">
                        <h2>Dashboard Overview</h2>
                        <div class="search-bar">
                            <input type="text" placeholder="Search...">
                            <i class="fas fa-search"></i>
                        </div>
                    </div>
                    <div class="dashboard-grid">
                        <div class="stats-card">
                            <i class="fas fa-book"></i>
                            <h3>Total Courses</h3>
                            <p class="count">0</p>
                        </div>
                        <div class="stats-card">
                            <i class="fas fa-sticky-note"></i>
                            <h3>Total Notes</h3>
                            <p class="count">0</p>
                        </div>
                        <div class="stats-card">
                            <i class="fas fa-bookmark"></i>
                            <h3>Bookmarks</h3>
                            <p class="count">0</p>
                        </div>
                    </div>
                </div>

                <!-- AI Assistant Section -->
                <div id="ai-assistant-content" class="dashboard-content hidden">
                    <div class="top-bar">
                        <h2>AI Study Assistant</h2>
                    </div>
                    <div class="chat-container">
                        <div class="chat-messages" id="chat-messages">
                            <div class="message ai">
                                Hello! I'm your AI study assistant. How can I help you today?
                            </div>
                        </div>
                        <div class="chat-input">
                            <input type="text" id="chat-input" placeholder="Ask your study-related question...">
                            <button onclick="sendMessage()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Reminders Section -->
                <div id="reminders-content" class="dashboard-content hidden">
                    <div class="top-bar">
                        <h2>Study Reminders</h2>
                        <button class="btn-primary" onclick="openReminderModal()">
                            <i class="fas fa-plus"></i> Set New Reminder
                        </button>
                    </div>
                    <div class="reminders-list" id="reminders-list">
                        <!-- Reminders will be loaded here -->
                    </div>
                </div>

                <!-- Pomodoro Timer Section -->
                <div id="pomodoro-content" class="dashboard-content hidden">
                    <div class="top-bar">
                        <h2>Pomodoro Timer</h2>
                    </div>
                    <div class="timer-container">
                        <div class="timer-display">
                            <span id="hours">00</span>:<span id="minutes">25</span>:<span id="seconds">00</span>
                        </div>
                        <div class="timer-controls">
                            <button class="btn-primary" onclick="startTimer()">
                                <i class="fas fa-play"></i> Start
                            </button>
                            <button class="btn-secondary" onclick="pauseTimer()" style="display: none;">
                                <i class="fas fa-pause"></i> Pause
                            </button>
                            <button class="btn-secondary" onclick="resetTimer()">
                                <i class="fas fa-redo"></i> Reset
                            </button>
                        </div>
                        <div class="timer-settings">
                            <div class="form-group">
                                <label>Study Duration (minutes)</label>
                                <input type="number" id="study-duration" value="25" min="1" max="120">
                            </div>
                            <div class="form-group">
                                <label>Break Duration (minutes)</label>
                                <input type="number" id="break-duration" value="5" min="1" max="30">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Study Groups Section -->
                <div id="study-groups-content" class="dashboard-content hidden">
                    <div class="top-bar">
                        <h2>Study Groups</h2>
                        <button class="btn-primary" onclick="openCreateGroupModal()">
                            <i class="fas fa-plus"></i> Create New Group
                        </button>
                    </div>
                    <div class="groups-container">
                        <div class="groups-filters">
                            <div class="search-box">
                                <input type="text" id="groupSearch" placeholder="Search groups...">
                                <i class="fas fa-search"></i>
                            </div>
                            <div class="filter-buttons">
                                <button class="btn btn-outline active" data-filter="all">All Groups</button>
                                <button class="btn btn-outline" data-filter="my-groups">My Groups</button>
                                <button class="btn btn-outline" data-filter="public">Public</button>
                            </div>
                        </div>

                        <div class="groups-grid" id="groupsList">
                            <!-- Groups will be dynamically loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Courses Section -->
                <div id="courses-content" class="dashboard-content hidden">
                    <div class="top-bar">
                        <h2>My Courses</h2>
                        <div class="course-filters">
                            <select id="filter-category" class="filter-select">
                                <option value="">All Categories</option>
                                <option value="Programming">Programming</option>
                                <option value="Design">Design</option>
                                <option value="Business">Business</option>
                                <option value="Marketing">Marketing</option>
                                <option value="Data Science">Data Science</option>
                                <option value="AI/ML">AI/ML</option>
                                <option value="Other">Other</option>
                            </select>
                            <select id="filter-status" class="filter-select">
                                <option value="">All Status</option>
                                <option value="To Start">To Start</option>
                                <option value="In Progress">In Progress</option>
                                <option value="Completed">Completed</option>
                            </select>
                            <select id="filter-priority" class="filter-select">
                                <option value="">All Priorities</option>
                                <option value="High">High Priority</option>
                                <option value="Medium">Medium Priority</option>
                                <option value="Low">Low Priority</option>
                            </select>
                        </div>
                        <button class="btn-primary" id="add-course-btn">
                            <i class="fas fa-plus"></i> Add Course
                        </button>
                    </div>
                    <div id="courses-list" class="courses-grid">
                        <!-- Courses will be added here dynamically -->
                    </div>
                </div>

                <!-- Notes Section -->
                <div id="notes-content" class="dashboard-content hidden">
                    <div class="section-header">
                        <h2>My Notes</h2>
                        <button id="add-note-btn" class="btn-primary">
                            <i class="fas fa-plus"></i> Add Note
                        </button>
                    </div>

                    <div class="notes-filters">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="notes-search" placeholder="Search notes...">
                        </div>
                        <select id="notes-category-filter">
                            <option value="all">All Categories</option>
                            <option value="lecture">Lecture Notes</option>
                            <option value="assignment">Assignments</option>
                            <option value="project">Projects</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="notes-container">
                        <div id="notes-list" class="notes-grid"></div>
                    </div>
                </section>

                <!-- Bookmarks Section -->
                <div id="bookmarks-content" class="dashboard-content hidden">
                    <div class="top-bar">
                        <h2>My Bookmarks</h2>
                    </div>
                    <div id="bookmarks-list" class="bookmarks-grid">
                        <!-- Bookmarks will be added here dynamically -->
                    </div>
                </div>

                <!-- Settings Section -->
                <div id="settings-content" class="dashboard-content hidden">
                    <div class="top-bar">
                        <h2>Settings</h2>
                    </div>
                    <div class="settings-form">
                        <div class="form-group">
                            <label for="update-username">Username</label>
                            <input type="text" id="update-username">
                        </div>
                        <div class="form-group">
                            <label for="update-email">Email</label>
                            <input type="email" id="update-email">
                        </div>
                        <div class="form-group">
                            <label for="update-password">New Password</label>
                            <input type="password" id="update-password">
                        </div>
                        <button class="btn-primary" id="save-settings-btn">Save Changes</button>
                    </div>
                </div>

                <!-- Platforms Section -->
                <div id="platforms-content" class="dashboard-content hidden">
                    <div class="top-bar">
                        <h2>Quick Access Platforms</h2>
                        <div class="platform-filters">
                            <button class="btn-filter active" data-category="all">All</button>
                            <button class="btn-filter" data-category="coding">Coding</button>
                            <button class="btn-filter" data-category="professional">Professional</button>
                            <button class="btn-filter" data-category="learning">Learning</button>
                            <button class="btn-filter" data-category="documentation">Documentation</button>
                            <button class="btn-filter" data-category="ai_tools">AI Tools</button>
                            <button class="btn-filter" data-category="favorites">Favorites</button>
                        </div>
                    </div>

                    <div class="platforms-grid" id="platformsGrid">
                        <!-- Platforms will be dynamically loaded here -->
                    </div>

                    <div class="contests-section">
                        <h3>Upcoming Coding Contests</h3>
                        <div class="contests-grid" id="contestsGrid">
                            <!-- Contests will be dynamically loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reminder Modal -->
            <div id="reminder-modal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Set Study Reminder</h3>
                        <button class="close" onclick="closeReminderModal()">&times;</button>
                    </div>
                    <form id="reminder-form">
                        <div class="form-group">
                            <label>Title</label>
                            <input type="text" name="title" required>
                        </div>
                        <div class="form-group">
                            <label>Date & Time</label>
                            <input type="datetime-local" name="datetime" required>
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea name="description"></textarea>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn-secondary" onclick="closeReminderModal()">Cancel</button>
                            <button type="submit" class="btn-primary">Set Reminder</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Add Course Modal -->
            <div id="add-course-modal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Add New Course</h3>
                        <button class="close">&times;</button>
                    </div>
                    <form id="add-course-form">
                        <div class="form-group">
                            <label for="course-name">Course Name</label>
                            <input type="text" id="course-name" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="course-description">Description</label>
                            <textarea id="course-description" name="description"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="course-platform">Platform</label>
                            <select id="course-platform" name="platform">
                                <option value="Coursera">Coursera</option>
                                <option value="Udemy">Udemy</option>
                                <option value="edX">edX</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="course-link">Course Link</label>
                            <input type="url" id="course-link" name="link" placeholder="https://...">
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn-secondary close">Cancel</button>
                            <button type="submit" class="btn-primary">Add Course</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Note Modal -->
    <div id="add-note-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Note</h3>
                <button class="close">&times;</button>
            </div>
            <form id="add-note-form" onsubmit="saveNote(event)">
                <div class="form-group">
                    <label for="note-title">Title</label>
                    <input type="text" id="note-title" name="title" required>
                </div>
                
                <div class="form-group">
                    <label for="note-content">Content</label>
                    <textarea id="note-content" name="content" rows="6"></textarea>
                </div>

                <div class="form-group">
                    <label for="note-category">Category</label>
                    <select id="note-category" name="category" required>
                        <option value="lecture">Lecture Notes</option>
                        <option value="assignment">Assignments</option>
                        <option value="project">Projects</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="note-tags">Tags (comma-separated)</label>
                    <input type="text" id="note-tags" name="tags" placeholder="e.g., math, physics, important">
                </div>

                <div class="form-group">
                    <label>Attachments</label>
                    <div class="file-upload-container">
                        <div class="file-upload" id="pdf-upload">
                            <i class="fas fa-file-pdf"></i>
                            <p>Drop PDF files here or click to upload</p>
                            <input type="file" name="pdf" accept=".pdf" multiple>
                        </div>
                        <div class="file-upload" id="image-upload">
                            <i class="fas fa-image"></i>
                            <p>Drop images here or click to upload</p>
                            <input type="file" name="images" accept="image/*" multiple>
                        </div>
                    </div>
                    <div id="upload-preview" class="upload-preview"></div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeNoteModal()">Cancel</button>
                    <button type="submit" class="btn-primary">Save Note</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Create Group Modal -->
    <div id="createGroupModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Study Group</h3>
                <button class="close-btn" onclick="closeCreateGroupModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="createGroupForm">
                    <div class="form-group">
                        <label for="groupName">Group Name</label>
                        <input type="text" id="groupName" required>
                    </div>
                    <div class="form-group">
                        <label for="groupDescription">Description</label>
                        <textarea id="groupDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="groupVisibility">Visibility</label>
                        <select id="groupVisibility">
                            <option value="public">Public</option>
                            <option value="private">Private</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="groupTags">Tags (comma-separated)</label>
                        <input type="text" id="groupTags" placeholder="e.g., math, physics, chemistry">
                    </div>
                    <button type="submit" class="btn btn-primary">Create Group</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Group Discussion Modal -->
    <div id="groupDiscussionModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="groupDiscussionTitle">Group Discussion</h3>
                <button class="close-btn" onclick="closeGroupDiscussionModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="discussion-container">
                    <div class="discussion-messages" id="discussionMessages">
                        <!-- Messages will be dynamically loaded here -->
                    </div>
                    <div class="discussion-input">
                        <form id="messageForm">
                            <textarea id="messageInput" placeholder="Type your message..."></textarea>
                            <button type="submit" class="btn btn-primary">Send</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>// DOM Elements
const homeSection = document.getElementById('home-section');
const authSection = document.getElementById('auth-section');
const dashboardSection = document.getElementById('dashboard-section');
const loginForm = document.getElementById('login-form');
const registerForm = document.getElementById('register-form');
const tabBtns = document.querySelectorAll('.tab-btn');
const addCourseModal = document.getElementById('add-course-modal');
const addNoteModal = document.getElementById('add-note-modal');
const closeBtns = document.querySelectorAll('.close');
const addCourseForm = document.getElementById('add-course-form');
const addNoteForm = document.getElementById('add-note-form');
const courseList = document.querySelector('.course-list');
const notesList = document.querySelector('.notes-list');
const searchInput = document.querySelector('.search-bar input');
const getStartedBtn = document.getElementById('get-started-btn');
const navLinks = document.querySelectorAll('.nav-links li');
const dashboardContents = document.querySelectorAll('.dashboard-content');

// Global variables
let courses = [];
let notes = [];
let bookmarks = [];
let settings = {
    theme: 'dark',
    notifications: true,
    aiRecommendations: true,
    calendarIntegration: false
};

// Authentication state
let isAuthenticated = false;
let currentUser = null;

// Add this at the beginning of the file
let notificationSound = new Audio('https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3');
let timerSound = new Audio('https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3');

// Timer Variables
let timerInterval;
let timeLeft;
let isRunning = false;
let isBreak = false;
let studyDuration = 25;
let breakDuration = 5;

// Study Groups Functions
let currentGroupId = null;

function openCreateGroupModal() {
    document.getElementById('createGroupModal').classList.remove('hidden');
}

function closeCreateGroupModal() {
    document.getElementById('createGroupModal').classList.add('hidden');
}

function openGroupDiscussionModal(groupId, groupName) {
    currentGroupId = groupId;
    document.getElementById('groupDiscussionTitle').textContent = groupName;
    document.getElementById('groupDiscussionModal').classList.remove('hidden');
    loadGroupMessages(groupId);
}

function closeGroupDiscussionModal() {
    document.getElementById('groupDiscussionModal').classList.add('hidden');
    currentGroupId = null;
}

async function loadGroups() {
    try {
        const response = await fetch('/api/groups', {
            headers: {
                'x-username': localStorage.getItem('username')
            }
        });
        const groups = await response.json();
        displayGroups(groups);
    } catch (error) {
        console.error('Error loading groups:', error);
        showNotification('Error loading groups', 'error');
    }
}

function displayGroups(groups) {
    const groupsList = document.getElementById('groupsList');
    groupsList.innerHTML = '';

    groups.forEach(group => {
        const groupCard = document.createElement('div');
        groupCard.className = 'group-card';
        groupCard.innerHTML = `
            <h3>${group.name}</h3>
            <p>${group.description}</p>
            <div class="group-meta">
                <span>${group.memberCount} members</span>
                <span>${group.messageCount} messages</span>
            </div>
            <div class="group-tags">
                ${group.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
            </div>
            <div class="group-actions">
                <button class="btn btn-primary" onclick="openGroupDiscussionModal('${group.id}', '${group.name}')">
                    Join Discussion
                </button>
                ${group.isOwner ? `
                    <button class="btn btn-outline" onclick="editGroup('${group.id}')">
                        Edit
                    </button>
                ` : ''}
            </div>
        `;
        groupsList.appendChild(groupCard);
    });
}

async function loadGroupMessages(groupId) {
    try {
        const response = await fetch(`/api/groups/${groupId}/messages`, {
            headers: {
                'x-username': localStorage.getItem('username')
            }
        });
        const messages = await response.json();
        displayMessages(messages);
    } catch (error) {
        console.error('Error loading messages:', error);
        showNotification('Error loading messages', 'error');
    }
}

function displayMessages(messages) {
    const messagesContainer = document.getElementById('discussionMessages');
    messagesContainer.innerHTML = '';

    messages.forEach(message => {
        const messageElement = document.createElement('div');
        messageElement.className = 'message';
        messageElement.innerHTML = `
            <div class="message-header">
                <span>${message.username}</span>
                <span>${new Date(message.timestamp).toLocaleString()}</span>
            </div>
            <div class="message-content">${message.content}</div>
        `;
        messagesContainer.appendChild(messageElement);
    });

    messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

// Event Listeners
document.getElementById('createGroupForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const groupData = {
        name: document.getElementById('groupName').value,
        description: document.getElementById('groupDescription').value,
        visibility: document.getElementById('groupVisibility').value,
        tags: document.getElementById('groupTags').value.split(',').map(tag => tag.trim())
    };

    try {
        const response = await fetch('/api/groups', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'x-username': localStorage.getItem('username')
            },
            body: JSON.stringify(groupData)
        });

        if (response.ok) {
            closeCreateGroupModal();
            loadGroups();
            showNotification('Group created successfully', 'success');
        } else {
            throw new Error('Failed to create group');
        }
    } catch (error) {
        console.error('Error creating group:', error);
        showNotification('Error creating group', 'error');
    }
});

document.getElementById('messageForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    if (!currentGroupId) return;

    const messageContent = document.getElementById('messageInput').value.trim();
    if (!messageContent) return;

    try {
        const response = await fetch(`/api/groups/${currentGroupId}/messages`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'x-username': localStorage.getItem('username')
            },
            body: JSON.stringify({ content: messageContent })
        });

        if (response.ok) {
            document.getElementById('messageInput').value = '';
            loadGroupMessages(currentGroupId);
        } else {
            throw new Error('Failed to send message');
        }
    } catch (error) {
        console.error('Error sending message:', error);
        showNotification('Error sending message', 'error');
    }
});

// Search and Filter Functionality
document.getElementById('groupSearch').addEventListener('input', (e) => {
    const searchTerm = e.target.value.toLowerCase();
    const groupCards = document.querySelectorAll('.group-card');
    
    groupCards.forEach(card => {
        const groupName = card.querySelector('h3').textContent.toLowerCase();
        const groupDescription = card.querySelector('p').textContent.toLowerCase();
        const tags = Array.from(card.querySelectorAll('.tag')).map(tag => tag.textContent.toLowerCase());
        
        if (groupName.includes(searchTerm) || 
            groupDescription.includes(searchTerm) || 
            tags.some(tag => tag.includes(searchTerm))) {
            card.style.display = 'block';
        } else {
            card.style.display = 'none';
        }
    });
});

document.querySelectorAll('.filter-buttons button').forEach(button => {
    button.addEventListener('click', async () => {
        const filter = button.dataset.filter;
        
        // Update active button
        document.querySelectorAll('.filter-buttons button').forEach(btn => {
            btn.classList.remove('active');
        });
        button.classList.add('active');

        try {
            const response = await fetch(`/api/groups?filter=${filter}`, {
                headers: {
                    'x-username': localStorage.getItem('username')
                }
            });
            const groups = await response.json();
            displayGroups(groups);
        } catch (error) {
            console.error('Error filtering groups:', error);
            showNotification('Error filtering groups', 'error');
        }
    });
});

// Load groups when the study groups section is shown
document.querySelector('[data-section="study-groups-content"]').addEventListener('click', () => {
    loadGroups();
});

// Navigation Functions
function showSection(sectionId) {
    // First hide all sections
    document.querySelectorAll('.section').forEach(section => {
        section.classList.remove('active');
        section.style.display = 'none';
    });
    
    // Show the requested section
    const section = document.getElementById(sectionId);
    if (section) {
        section.classList.add('active');
        section.style.display = sectionId === 'dashboard-section' ? 'flex' : 'block';
        
        // If showing auth section, show login form by default
        if (sectionId === 'auth-section') {
            switchTab('login');
        }
        
        // If showing dashboard, show the default dashboard content
        if (sectionId === 'dashboard-section') {
            // Hide all dashboard contents first
            document.querySelectorAll('.dashboard-content').forEach(content => {
                content.classList.remove('active');
                content.style.display = 'none';
            });
            
            // Show dashboard overview by default
            const dashboardContent = document.getElementById('dashboard-content');
            if (dashboardContent) {
                dashboardContent.classList.add('active');
                dashboardContent.style.display = 'block';
                
                // Load dashboard data
                loadDashboardData().catch(console.error);
            }
        }
    }
}

function showAuthSection() {
    showSection('auth-section');
    // Set login as the default tab
    switchTab('login');
}

async function showDashboard() {
    // Hide all sections first
    document.querySelectorAll('.section').forEach(section => {
        section.style.display = 'none';
    });
    
    // Show dashboard section
    const dashboardSection = document.getElementById('dashboard-section');
    if (dashboardSection) {
        dashboardSection.style.display = 'block';
        
        // Hide all dashboard content sections
        document.querySelectorAll('.dashboard-content').forEach(section => {
            section.style.display = 'none';
        });
        
        // Show dashboard content by default
        const dashboardContent = document.getElementById('dashboard-content');
        if (dashboardContent) {
            dashboardContent.style.display = 'block';
        }
        
        // Load dashboard data and reminders
        await Promise.all([
            loadDashboardData(),
            loadReminders()
        ]);
    }
}

function showDashboardContent(contentId) {
    // Hide all dashboard content sections
    document.querySelectorAll('.dashboard-content').forEach(section => {
        section.classList.add('hidden');
    });
    
    // Show the selected section
    const selectedSection = document.getElementById(contentId);
    if (selectedSection) {
        selectedSection.classList.remove('hidden');
        
        // Load section-specific data
        switch(contentId) {
            case 'dashboard-content':
                loadDashboardData();
                break;
            case 'courses-content':
                loadCourses();
                break;
            case 'notes-content':
                loadNotes();
                break;
            case 'bookmarks-content':
                loadBookmarks();
                break;
            case 'ai-assistant-content':
                // Reset chat messages when opening AI Assistant
                const chatMessages = document.getElementById('chat-messages');
                if (chatMessages) {
                    chatMessages.innerHTML = `
                        <div class="message ai">
                            Hello! I'm your AI study assistant. How can I help you today?
                        </div>
                    `;
                }
                break;
            case 'reminders-content':
                loadReminders();
                break;
            case 'pomodoro-content':
                resetTimer();
                break;
            case 'settings-content':
                loadSettings();
                break;
        }
    }
}

// Message display function
function showMessage(message, type = 'info') {
    // Remove any existing messages
    const existingMessage = document.querySelector('.message');
    if (existingMessage) {
        existingMessage.remove();
    }

    // Create message element
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${type}`;
    messageDiv.textContent = message;

    // Add message to the auth container
    const authContainer = document.querySelector('.auth-container');
    if (authContainer) {
        authContainer.insertBefore(messageDiv, authContainer.firstChild);
    }

    // Remove message after 3 seconds
    setTimeout(() => {
        messageDiv.remove();
    }, 3000);
}

// Auth Functions
async function login(e) {
    e.preventDefault();
    const email = document.getElementById('login-email').value;
    const password = document.getElementById('login-password').value;

    try {
        const response = await fetch('/api/auth/login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ email, password })
        });

        const data = await response.json();

        if (response.ok) {
            // Store user data and token
            localStorage.setItem('token', data.token);
            localStorage.setItem('user', JSON.stringify(data.user));
            
            // Update UI
            currentUser = data.user;
            isAuthenticated = true;
            document.getElementById('display-username').textContent = data.user.username;
            
            // Show success message
            showMessage('Login successful! Redirecting...', 'success');
            
            // Redirect to dashboard after a short delay
            setTimeout(() => {
                showSection('dashboard-section');
                loadDashboard();
            }, 1000);
        } else {
            showMessage(data.error || 'Login failed', 'error');
        }
    } catch (error) {
        console.error('Login error:', error);
        showMessage('Error logging in', 'error');
    }
}

async function register(e) {
    e.preventDefault();
    const username = document.getElementById('register-username').value;
    const email = document.getElementById('register-email').value;
    const password = document.getElementById('register-password').value;

    try {
        const response = await fetch('/api/auth/register', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ username, email, password })
        });

        const data = await response.json();

        if (response.ok) {
            // Store user data and token
            localStorage.setItem('token', data.token);
            localStorage.setItem('user', JSON.stringify(data.user));
            
            // Update UI
            currentUser = data.user;
            isAuthenticated = true;
            document.getElementById('display-username').textContent = data.user.username;
            
            // Show success message
            showMessage('Registration successful! Redirecting...', 'success');
            
            // Redirect to dashboard after a short delay
            setTimeout(() => {
                showSection('dashboard-section');
                loadDashboard();
            }, 1000);
        } else {
            showMessage(data.error || 'Registration failed', 'error');
        }
    } catch (error) {
        console.error('Registration error:', error);
        showMessage('Error registering', 'error');
    }
}

function logout() {
    localStorage.removeItem('token');
    localStorage.removeItem('user');
    currentUser = null;
    isAuthenticated = false;
    showSection('home-section');
    showMessage('Logged out successfully', 'success');
}

// UI Functions
function switchTab(tab) {
    // Remove active class from all forms
    document.getElementById('login-form').classList.remove('active');
    document.getElementById('register-form').classList.remove('active');

    // Show the selected form
    const selectedForm = document.getElementById(`${tab}-form`);
    if (selectedForm) {
        selectedForm.classList.add('active');
    }
}

function showModal(modal) {
    modal.classList.remove('hidden');
}

function hideModal(modal) {
    modal.classList.add('hidden');
}

function showError(message) {
    // Remove any existing error messages
    const existingError = document.querySelector('.error-message');
    if (existingError) {
        existingError.remove();
    }

    // Create error message element
    const errorDiv = document.createElement('div');
    errorDiv.className = 'error-message';
    errorDiv.textContent = message;
    
    // Add the error message to the auth container
    const authContainer = document.querySelector('.auth-container');
    authContainer.insertBefore(errorDiv, authContainer.firstChild);
    
    // Remove the error message after 3 seconds
    setTimeout(() => {
        errorDiv.remove();
    }, 3000);
}

function showSuccess(message) {
    // Remove any existing success messages
    const existingSuccess = document.querySelector('.success-message');
    if (existingSuccess) {
        existingSuccess.remove();
    }

    // Create success message element
    const successDiv = document.createElement('div');
    successDiv.className = 'success-message';
    successDiv.textContent = message;
    
    // Add the success message to the auth container
    const authContainer = document.querySelector('.auth-container');
    authContainer.insertBefore(successDiv, authContainer.firstChild);
    
    // Remove the success message after 3 seconds
    setTimeout(() => {
        successDiv.remove();
    }, 3000);
}

// Dashboard Functions
async function loadDashboardData() {
    try {
        await Promise.allSettled([
            loadCourses(),
            loadNotes(),
            loadBookmarks()
        ]);
        updateStats();
        await loadAIRecommendations();
    } catch (error) {
        console.error('Error loading dashboard data:', error);
    }
}

async function loadCourses() {
    try {
        const response = await fetch('/api/courses', {
            headers: {
                'Authorization': `Bearer ${localStorage.getItem('token')}`
            }
        });
        
        if (response.ok) {
            const courses = await response.json();
            displayCourses(courses);
        } else {
            showNotification('Failed to load courses', 'error');
        }
    } catch (error) {
        console.error('Error loading courses:', error);
        showNotification('Failed to load courses. Please try again.', 'error');
    }
}

async function loadNotes() {
    try {
        const user = JSON.parse(localStorage.getItem('user'));
        if (!user) {
            throw new Error('User not authenticated');
        }

        const response = await fetch('/api/notes', {
            headers: {
                'X-Username': user.username,
                'Content-Type': 'application/json'
            }
        });
        
        if (!response.ok) {
            const errorData = await response.json().catch(() => ({}));
            throw new Error(errorData.message || 'Failed to fetch notes');
        }
        
        notes = await response.json();
        displayNotes();
    } catch (error) {
        console.error('Error loading notes:', error);
        showNotification('Error loading notes: ' + error.message, 'error');
    }
}

async function loadBookmarks() {
    try {
        const response = await fetch('/api/bookmarks', {
            headers: {
                'Authorization': `Bearer ${localStorage.getItem('token')}`
            }
        });

        if (response.ok) {
            bookmarks = await response.json();
            renderBookmarks();
        }
    } catch (error) {
        showError('Error loading bookmarks');
    }
}

function updateStats() {
    try {
        const activeCourses = courses.filter(course => course.status === 'In Progress').length;
        const completedCourses = courses.filter(course => course.status === 'Completed').length;
        const totalNotes = notes.length;
        const totalBookmarks = bookmarks.length;

        // Update stats only if elements exist
        const statsCards = document.querySelectorAll('.stats-card .count');
        if (statsCards.length >= 4) {
            statsCards[0].textContent = activeCourses;
            statsCards[1].textContent = completedCourses;
            statsCards[2].textContent = totalNotes;
            statsCards[3].textContent = totalBookmarks;
        }
    } catch (error) {
        console.error('Error updating stats:', error);
    }
}

async function loadAIRecommendations() {
    // Simulate AI recommendations based on user's courses and progress
    const recommendations = courses
        .filter(course => course.status === 'In Progress')
        .map(course => ({
            title: `Recommended: ${course.category} Practice`,
            description: `Based on your progress in ${course.title}`,
            link: '#'
        }));

    const recommendationsList = document.querySelector('.recommendations-list');
    if (recommendationsList) {
        recommendationsList.innerHTML = recommendations.map(rec => `
            <div class="recommendation-card">
                <h3>${rec.title}</h3>
                <p>${rec.description}</p>
                <a href="${rec.link}" class="btn">View Recommendation</a>
            </div>
        `).join('');
    }
}

function displayCourses(courses) {
    const coursesList = document.getElementById('courses-list');
    if (!coursesList) return;

    if (courses.length === 0) {
        coursesList.innerHTML = `
            <div class="empty-state">
                <h3>No Courses Yet</h3>
                <p>Click the "Add Course" button to get started!</p>
            </div>
        `;
        return;
    }

    coursesList.innerHTML = courses.map(course => `
        <div class="course-card">
            <div class="course-header">
                <h3>${course.name}</h3>
                <div class="course-actions">
                    <button class="btn-edit" onclick="editCourse(${course.id})">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn-delete" onclick="deleteCourse(${course.id})">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
            <div class="course-body">
                <p>${course.description || 'No description available'}</p>
                <div class="course-info">
                    <span class="badge platform">${course.platform}</span>
                    ${course.link ? `
                        <a href="${course.link}" target="_blank" class="course-link">
                            <i class="fas fa-external-link-alt"></i> Go to Course
                        </a>
                    ` : ''}
                </div>
            </div>
        </div>
    `).join('');
}

function displayNotes() {
    const notesList = document.getElementById('notes-list');
    if (!notesList) return;

    if (notes.length === 0) {
        notesList.innerHTML = '<div class="no-notes">No notes found</div>';
        return;
    }

    notesList.innerHTML = notes.map(note => `
        <div class="note-card" data-id="${note.id}" draggable="true">
            <div class="note-header">
                <h3>${note.title}</h3>
                <div class="note-actions">
                    <button onclick="deleteNote(${note.id})" class="btn-delete">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
            <div class="note-content">
                <p>${note.description}</p>
                ${note.file_path ? `
                    <div class="note-file">
                        <a href="${note.file_path}" target="_blank" class="btn-download">
                            <i class="fas fa-download"></i> Download File
                        </a>
                    </div>
                ` : ''}
                ${note.tags ? `
                    <div class="note-tags">
                        ${JSON.parse(note.tags).map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                ` : ''}
            </div>
        </div>
    `).join('');

    // Initialize drag and drop
    initializeDragAndDrop();
}

function initializeDragAndDrop() {
    const notesList = document.getElementById('notes-list');
    if (!notesList) return;

    const noteCards = notesList.querySelectorAll('.note-card');
    noteCards.forEach(card => {
        card.addEventListener('dragstart', handleDragStart);
        card.addEventListener('dragend', handleDragEnd);
        card.addEventListener('dragover', handleDragOver);
        card.addEventListener('drop', handleDrop);
    });
}

let draggedCard = null;

function handleDragStart(e) {
    draggedCard = this;
    this.classList.add('dragging');
}

function handleDragEnd(e) {
    this.classList.remove('dragging');
    draggedCard = null;
}

function handleDragOver(e) {
    e.preventDefault();
    if (this === draggedCard) return;
    
    const rect = this.getBoundingClientRect();
    const midY = rect.top + rect.height / 2;
    
    if (e.clientY < midY) {
        this.parentNode.insertBefore(draggedCard, this);
    } else {
        this.parentNode.insertBefore(draggedCard, this.nextSibling);
    }
}

function handleDrop(e) {
    e.preventDefault();
    updateNotePositions();
}

async function updateNotePositions() {
    try {
        const user = JSON.parse(localStorage.getItem('user'));
        if (!user) {
            throw new Error('User not authenticated');
        }

        const noteCards = document.querySelectorAll('.note-card');
        const updates = Array.from(noteCards).map((card, index) => ({
            id: parseInt(card.dataset.id),
            position: index + 1
        }));

        await Promise.all(updates.map(update =>
            fetch(`/api/notes/${update.id}/position`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Username': user.username
                },
                body: JSON.stringify({ position: update.position })
            })
        ));

        // Reload notes to ensure order is correct
        await loadNotes();
    } catch (error) {
        console.error('Error updating note positions:', error);
        showNotification('Error updating note positions', 'error');
    }
}

// Notes Management Functions
function initializeNotes() {
    const addNoteBtn = document.getElementById('add-note-btn');
    const notesList = document.getElementById('notes-list');
    const addNoteModal = document.getElementById('add-note-modal');
    const addNoteForm = document.getElementById('add-note-form');
    const notesSearch = document.getElementById('notes-search');
    const notesCategoryFilter = document.getElementById('notes-category-filter');

    // Initialize file upload previews
    initializeFileUploads();

    // Add note button click handler
    if (addNoteBtn) {
        addNoteBtn.addEventListener('click', () => {
            if (addNoteModal) {
                addNoteModal.classList.remove('hidden');
                // Reset form
                if (addNoteForm) {
                    addNoteForm.reset();
                    delete addNoteForm.dataset.noteId;
                    clearUploadPreview();
                }
            }
        });
    }

    // Close modal when clicking outside
    window.addEventListener('click', (event) => {
        if (event.target === addNoteModal) {
            closeNoteModal();
        }
    });

    // Close modal when clicking close button
    const closeBtn = addNoteModal?.querySelector('.close');
    if (closeBtn) {
        closeBtn.addEventListener('click', closeNoteModal);
    }

    // Search and filter handlers
    if (notesSearch) {
        notesSearch.addEventListener('input', filterNotes);
    }
    if (notesCategoryFilter) {
        notesCategoryFilter.addEventListener('change', filterNotes);
    }

    // Form submission handler
    if (addNoteForm) {
        addNoteForm.addEventListener('submit', saveNote);
    }
}

function initializeFileUploads() {
    const pdfUpload = document.getElementById('pdf-upload');
    const imageUpload = document.getElementById('image-upload');
    const uploadPreview = document.getElementById('upload-preview');

    if (pdfUpload) {
        pdfUpload.addEventListener('change', (e) => handleFileUpload(e, 'pdf'));
    }
    if (imageUpload) {
        imageUpload.addEventListener('change', (e) => handleFileUpload(e, 'image'));
    }

    // Drag and drop handlers
    [pdfUpload, imageUpload].forEach(container => {
        if (container) {
            container.addEventListener('dragover', (e) => {
                e.preventDefault();
                container.classList.add('dragover');
            });

            container.addEventListener('dragleave', () => {
                container.classList.remove('dragover');
            });

            container.addEventListener('drop', (e) => {
                e.preventDefault();
                container.classList.remove('dragover');
                const files = e.dataTransfer.files;
                const type = container.id === 'pdf-upload' ? 'pdf' : 'image';
                handleFileUpload({ target: { files } }, type);
            });
        }
    });
}

function handleFileUpload(event, type) {
    const files = event.target.files;
    const uploadPreview = document.getElementById('upload-preview');
    
    if (!files.length) return;

    Array.from(files).forEach(file => {
        const previewItem = document.createElement('div');
        previewItem.className = 'preview-item';
        
        if (type === 'image') {
            const reader = new FileReader();
            reader.onload = (e) => {
                previewItem.innerHTML = `
                    <img src="${e.target.result}" alt="${file.name}">
                    <span class="file-name">${file.name}</span>
                    <button class="remove-file" onclick="removeFile(this)">&times;</button>
                `;
            };
            reader.readAsDataURL(file);
        } else {
            previewItem.innerHTML = `
                <i class="fas fa-file-pdf"></i>
                <span class="file-name">${file.name}</span>
                <button class="remove-file" onclick="removeFile(this)">&times;</button>
            `;
        }
        
        uploadPreview.appendChild(previewItem);
    });
}

function removeFile(button) {
    button.closest('.preview-item').remove();
}

function clearUploadPreview() {
    const uploadPreview = document.getElementById('upload-preview');
    if (uploadPreview) {
        uploadPreview.innerHTML = '';
    }
}

function closeNoteModal() {
    const modal = document.getElementById('add-note-modal');
    if (modal) {
        modal.classList.add('hidden');
        clearUploadPreview();
    }
}

function filterNotes() {
    const searchQuery = document.getElementById('notes-search')?.value.toLowerCase();
    const categoryFilter = document.getElementById('notes-category-filter')?.value;
    
    const filteredNotes = notes.filter(note => {
        const matchesSearch = searchQuery ? 
            note.title.toLowerCase().includes(searchQuery) ||
            note.content.toLowerCase().includes(searchQuery) ||
            note.tags.some(tag => tag.toLowerCase().includes(searchQuery))
            : true;
            
        const matchesCategory = categoryFilter && categoryFilter !== 'all' ?
            note.category === categoryFilter
            : true;
            
        return matchesSearch && matchesCategory;
    });
    
    displayNotes(filteredNotes);
}

async function saveNote(event) {
    event.preventDefault();
    const form = event.target;
    const formData = new FormData(form);
    
    try {
        const user = JSON.parse(localStorage.getItem('user'));
        if (!user) {
            throw new Error('User not authenticated');
        }

        // Add files to formData
        const pdfFiles = form.querySelector('input[name="pdf"]').files;
        const imageFiles = form.querySelector('input[name="images"]').files;
        
        Array.from(pdfFiles).forEach(file => {
            formData.append('files', file);
        });
        
        Array.from(imageFiles).forEach(file => {
            formData.append('files', file);
        });

        const noteData = {
            title: formData.get('title'),
            content: formData.get('content'),
            category: formData.get('category'),
            tags: formData.get('tags')?.split(',').map(tag => tag.trim()).filter(tag => tag) || []
        };

        const isEdit = form.dataset.noteId;
        const url = isEdit ? `/api/notes/${form.dataset.noteId}` : '/api/notes';
        const method = isEdit ? 'PUT' : 'POST';

        const response = await fetch(url, {
            method,
            headers: {
                'X-Username': user.username
            },
            body: formData
        });

        if (!response.ok) {
            const errorData = await response.json().catch(() => ({}));
            throw new Error(errorData.message || 'Failed to save note');
        }

        const savedNote = await response.json();
        
        if (isEdit) {
            notes = notes.map(note => note.id === parseInt(form.dataset.noteId) ? savedNote : note);
        } else {
            notes.unshift(savedNote);
        }
        
        // Reset form and close modal
        form.reset();
        delete form.dataset.noteId;
        clearUploadPreview();
        closeNoteModal();
        
        // Reload notes display
        await loadNotes();
        showNotification(isEdit ? 'Note updated successfully!' : 'Note added successfully!', 'success');
    } catch (error) {
        console.error('Error saving note:', error);
        showNotification('Error saving note: ' + error.message, 'error');
    }
}

// Check authentication status on page load
function checkAuth() {
    const isAuthenticated = localStorage.getItem('isAuthenticated') === 'true';
    if (isAuthenticated) {
        const username = localStorage.getItem('username');
        if (username) {
            currentUser = { username };
            document.getElementById('display-username').textContent = username;
        }
        return true;
    }
    return false;
}

// Initialize the application
document.addEventListener('DOMContentLoaded', () => {
    // First hide all sections
    document.querySelectorAll('.section').forEach(section => {
        section.style.display = 'none';
    });

    // Show home section by default
    const homeSection = document.getElementById('home-section');
    if (homeSection) {
        homeSection.style.display = 'block';
    }

    // Only redirect to dashboard if user is authenticated and explicitly requested
    if (window.location.hash === '#dashboard' && checkAuth()) {
        showDashboard();
    }

    // Add Course Button Click Handler
    const addCourseBtn = document.getElementById('add-course-btn');
    if (addCourseBtn) {
        addCourseBtn.addEventListener('click', () => {
            openModal('add-course-modal');
        });
    }

    // Get Started Button Click Handler
    const getStartedBtn = document.getElementById('get-started-btn');
    if (getStartedBtn) {
        getStartedBtn.addEventListener('click', () => {
            showSection('auth-section');
            switchTab('login'); // Show login form by default
        });
    }

    // Back to Home Button Click Handler
    const backToHomeBtn = document.getElementById('back-to-home');
    if (backToHomeBtn) {
        backToHomeBtn.addEventListener('click', () => {
            showSection('home-section');
        });
    }

    // Add Course Form Submit Handler
    const addCourseForm = document.getElementById('add-course-form');
    if (addCourseForm) {
        addCourseForm.addEventListener('submit', saveCourse);
    }

    // Close Modal Handlers
    const closeButtons = document.querySelectorAll('.close');
    closeButtons.forEach(button => {
        button.addEventListener('click', () => {
            const modal = button.closest('.modal');
            if (modal) {
                closeModal(modal.id);
            }
        });
    });

    // Close Modal on Outside Click
    window.addEventListener('click', (event) => {
        if (event.target.classList.contains('modal')) {
            closeModal(event.target.id);
        }
    });

    // Navigation Links Click Handler
    const navLinks = document.querySelectorAll('.nav-links li');
    navLinks.forEach(link => {
        link.addEventListener('click', () => {
            if (link.classList.contains('logout')) {
                logout();
                return;
            }
            
            const sectionId = link.getAttribute('data-section');
            if (sectionId) {
                showDashboardContent(sectionId);
                navLinks.forEach(l => l.classList.remove('active'));
                link.classList.add('active');
            }
        });
    });

    // Show/Hide Register Form
    const showRegisterBtn = document.getElementById('show-register');
    const showLoginBtn = document.getElementById('show-login');
    
    if (showRegisterBtn) {
        showRegisterBtn.addEventListener('click', (e) => {
            e.preventDefault();
            switchTab('register');
        });
    }

    if (showLoginBtn) {
        showLoginBtn.addEventListener('click', (e) => {
            e.preventDefault();
            switchTab('login');
        });
    }

    // Initialize login form handlers
    const loginForm = document.getElementById('login-form');
    if (loginForm) {
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = loginForm.querySelector('input[type="email"]').value;
            const password = loginForm.querySelector('input[type="password"]').value;
            await login(e);
        });
    }

    // Initialize register form handlers
    const registerForm = document.getElementById('register-form');
    if (registerForm) {
        registerForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = registerForm.querySelector('input[type="text"]').value;
            const email = registerForm.querySelector('input[type="email"]').value;
            const password = registerForm.querySelector('input[type="password"]').value;
            await register(e);
        });
    }
});

tabBtns.forEach(btn => {
    btn.addEventListener('click', () => {
        switchTab(btn.dataset.tab);
    });
});

closeBtns.forEach(btn => {
    btn.addEventListener('click', () => {
        hideModal(addCourseModal);
        hideModal(addNoteModal);
    });
});

addCourseForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(addCourseForm);
    try {
        const response = await fetch('/api/courses', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-Username': localStorage.getItem('username') || 'demo_user'
            },
            body: JSON.stringify({
                title: formData.get('title'),
                link: formData.get('link'),
                category: formData.get('category'),
                status: 'To Start'
            })
        });

        if (response.ok) {
            hideModal(addCourseModal);
            loadCourses();
            showSuccess('Course added successfully!');
        }
    } catch (error) {
        showError('Error adding course');
    }
});

addNoteForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(addNoteForm);
    try {
        const response = await fetch('/api/notes', {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${localStorage.getItem('token')}`
            },
            body: formData
        });

        if (response.ok) {
            hideModal(addNoteModal);
            loadNotes();
            showSuccess('Note added successfully!');
        }
    } catch (error) {
        showError('Error adding note');
    }
});

searchInput.addEventListener('input', (e) => {
    const searchTerm = e.target.value.toLowerCase();
    const filteredCourses = courses.filter(course => 
        course.title.toLowerCase().includes(searchTerm) ||
        course.category.toLowerCase().includes(searchTerm)
    );
    const filteredNotes = notes.filter(note =>
        note.title.toLowerCase().includes(searchTerm) ||
        note.content.toLowerCase().includes(searchTerm)
    );
    renderCourses(filteredCourses);
    renderNotes(filteredNotes);
});

// Navigation menu event listeners
navLinks.forEach(link => {
    link.addEventListener('click', () => {
        if (link.classList.contains('logout')) {
            logout();
        } else {
            // Remove active class from all links
            navLinks.forEach(l => l.classList.remove('active'));
            // Add active class to clicked link
            link.classList.add('active');
            
            // Get the section ID from data-section attribute
            const sectionId = link.getAttribute('data-section');
            if (sectionId) {
                // Hide all dashboard content sections
                document.querySelectorAll('.dashboard-content').forEach(section => {
                    section.classList.remove('active');
                    section.style.display = 'none';
                });
                
                // Show the selected section
                const selectedSection = document.getElementById(sectionId);
                if (selectedSection) {
                    selectedSection.classList.add('active');
                    selectedSection.style.display = 'block';
                    
                    // Load section-specific data
                    switch(sectionId) {
                        case 'dashboard-content':
                            loadDashboardData();
                            break;
                        case 'courses-content':
                            loadCourses();
                            break;
                        case 'notes-content':
                            loadNotes();
                            break;
                        case 'bookmarks-content':
                            loadBookmarks();
                            break;
                        case 'settings-content':
                            loadSettings();
                            break;
                    }
                }
            }
        }
    });
});

// Navigation section functions
function showCourses() {
    // Hide all dashboard content sections
    document.querySelectorAll('.dashboard-content').forEach(section => {
        section.style.display = 'none';
    });
    
    // Show courses section
    const coursesSection = document.getElementById('courses-content');
    if (coursesSection) {
        coursesSection.style.display = 'block';
        loadCourses(); // Load courses data
    }
}

function showNotes() {
    // Hide all dashboard content sections
    document.querySelectorAll('.dashboard-content').forEach(section => {
        section.style.display = 'none';
    });
    
    // Show notes section
    const notesSection = document.getElementById('notes-content');
    if (notesSection) {
        notesSection.style.display = 'block';
        loadNotes(); // Load notes data
    }
}

function showBookmarks() {
    // Hide all dashboard content sections
    document.querySelectorAll('.dashboard-content').forEach(section => {
        section.style.display = 'none';
    });
    
    // Show bookmarks section
    const bookmarksSection = document.getElementById('bookmarks-content');
    if (bookmarksSection) {
        bookmarksSection.style.display = 'block';
        loadBookmarks(); // Load bookmarks data
    }
}

function showSettings() {
    // Hide all dashboard content sections
    document.querySelectorAll('.dashboard-content').forEach(section => {
        section.style.display = 'none';
    });
    
    // Show settings section
    const settingsSection = document.getElementById('settings-content');
    if (settingsSection) {
        settingsSection.style.display = 'block';
        loadSettings(); // Load settings data
    }
}

// Dashboard Navigation
function initializeDashboard() {
    // Set initial username
    const username = localStorage.getItem('username');
    const displayUsername = document.getElementById('display-username');
    if (username && displayUsername) {
        displayUsername.textContent = username;
    }

    // Show dashboard content by default
    const defaultContent = document.getElementById('dashboard-content');
    if (defaultContent) {
        defaultContent.classList.remove('hidden');
    }

    // Initialize all dashboard features
    loadDashboardData();
    initializeSearch();
    initializeCourses();
    initializeNotes();
    initializeBookmarks();
    initializeSettings();
}

function initializeSearch() {
    const searchInput = document.querySelector('.search-bar input');
    searchInput.addEventListener('input', (e) => {
        const searchTerm = e.target.value.toLowerCase();
        // Implement search functionality here
    });
}

// Initialize Courses
function initializeCourses() {
    const addCourseBtn = document.getElementById('add-course-btn');
    const addCourseForm = document.getElementById('add-course-form');

    if (addCourseBtn) {
        addCourseBtn.addEventListener('click', () => {
            openModal('add-course-modal');
        });
    }

    if (addCourseForm) {
        addCourseForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(addCourseForm);
            const courseData = {
                name: formData.get('name'),
                description: formData.get('description'),
                platform: formData.get('platform'),
                link: formData.get('link')
            };

            try {
                const token = localStorage.getItem('token');
                if (!token) {
                    throw new Error('Not authenticated');
                }

                const response = await fetch('/api/courses', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(courseData)
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.message || 'Failed to add course');
                }

                const result = await response.json();
                showNotification('Course added successfully!', 'success');
                closeModal('add-course-modal');
                addCourseForm.reset();
                loadCourses(); // Refresh the courses list
            } catch (error) {
                console.error('Error adding course:', error);
                showNotification(error.message || 'Failed to add course. Please try again.', 'error');
            }
        });
    }
}

function initializeBookmarks() {
    const bookmarksList = document.getElementById('bookmarks-list');
    // Implement bookmarks functionality
}

function initializeSettings() {
    const saveSettingsBtn = document.getElementById('save-settings-btn');
    const usernameInput = document.getElementById('update-username');
    const emailInput = document.getElementById('update-email');
    const passwordInput = document.getElementById('update-password');

    // Pre-fill current user data
    const currentUsername = localStorage.getItem('username');
    const currentEmail = localStorage.getItem('email');
    if (currentUsername) usernameInput.value = currentUsername;
    if (currentEmail) emailInput.value = currentEmail;

    saveSettingsBtn.addEventListener('click', () => {
        // Implement settings update functionality
        console.log('Save settings clicked');
    });
}

// Course filtering functions
function filterCourses() {
    const categoryFilter = document.getElementById('category-filter')?.value;
    const statusFilter = document.getElementById('status-filter')?.value;
    const priorityFilter = document.getElementById('priority-filter')?.value;
    const searchQuery = document.getElementById('search-input')?.value.toLowerCase();

    let filteredCourses = [...courses];

    // Apply category filter
    if (categoryFilter && categoryFilter !== 'all') {
        filteredCourses = filteredCourses.filter(course => 
            course.category.toLowerCase() === categoryFilter.toLowerCase()
        );
    }

    // Apply status filter
    if (statusFilter && statusFilter !== 'all') {
        filteredCourses = filteredCourses.filter(course => 
            course.status.toLowerCase() === statusFilter.toLowerCase()
        );
    }

    // Apply priority filter
    if (priorityFilter && priorityFilter !== 'all') {
        filteredCourses = filteredCourses.filter(course => 
            course.priority.toLowerCase() === priorityFilter.toLowerCase()
        );
    }

    // Apply search filter
    if (searchQuery) {
        filteredCourses = filteredCourses.filter(course => 
            course.title.toLowerCase().includes(searchQuery) ||
            course.platform.toLowerCase().includes(searchQuery) ||
            course.category.toLowerCase().includes(searchQuery)
        );
    }

    displayCourses(filteredCourses);
}

// Update the displayCourses function to show filtered results
function displayCourses(filteredCourses = null) {
    const coursesList = document.getElementById('courses-list');
    if (!coursesList) return;

    const coursesToDisplay = filteredCourses || courses;
    
    if (coursesToDisplay.length === 0) {
        coursesList.innerHTML = '<div class="no-courses">No courses found</div>';
        return;
    }

    coursesList.innerHTML = coursesToDisplay.map(course => `
        <div class="course-card" data-id="${course.id}">
            <div class="course-header">
                <h3>${course.name}</h3>
                <span class="course-status ${course.status.toLowerCase()}">${course.status}</span>
            </div>
            <div class="course-body">
                <p>${course.description || 'No description available'}</p>
                <div class="course-info">
                    <span class="badge platform">${course.platform}</span>
                </div>
            </div>
            <div class="course-actions">
                <button class="btn-edit" onclick="editCourse(${course.id})">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn-delete" onclick="deleteCourse(${course.id})">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>
    `).join('');
}

// Add event listeners for filters
document.addEventListener('DOMContentLoaded', () => {
    // ... existing event listeners ...

    // Add filter event listeners
    const categoryFilter = document.getElementById('category-filter');
    const statusFilter = document.getElementById('status-filter');
    const priorityFilter = document.getElementById('priority-filter');
    const searchInput = document.getElementById('search-input');

    if (categoryFilter) {
        categoryFilter.addEventListener('change', filterCourses);
    }
    if (statusFilter) {
        statusFilter.addEventListener('change', filterCourses);
    }
    if (priorityFilter) {
        priorityFilter.addEventListener('change', filterCourses);
    }
    if (searchInput) {
        searchInput.addEventListener('input', filterCourses);
    }

    // Initialize notes functionality
    initializeNotes();
});

// Course Management Functions
async function editCourse(courseId) {
    const course = courses.find(c => c.id === courseId);
    if (!course) return;

    // Populate the form with course data
    document.getElementById('courseTitle').value = course.name;
    document.getElementById('courseLink').value = course.link;
    document.getElementById('coursePlatform').value = course.platform;
    document.getElementById('courseCategory').value = course.category;
    document.getElementById('courseDifficulty').value = course.difficulty;
    document.getElementById('coursePriority').value = course.priority;
    document.getElementById('courseStatus').value = course.status;
    document.getElementById('courseTags').value = Array.isArray(course.tags) ? course.tags.join(', ') : '';
    document.getElementById('courseNotes').value = course.notes || '';

    // Store the course ID for updating
    const form = document.getElementById('add-course-form');
    form.dataset.courseId = courseId;

    // Change the submit button text
    const submitBtn = form.querySelector('button[type="submit"]');
    submitBtn.innerHTML = '<i class="fas fa-save"></i> Update Course';

    // Show the modal
    openModal('add-course-modal');
}

async function saveCourse(event) {
    event.preventDefault();
    
    const form = event.target;
    const isEdit = form.dataset.courseId;
    
    // Get the current user from localStorage
    const user = JSON.parse(localStorage.getItem('user'));
    if (!user) {
        showMessage('User not authenticated', 'error');
        return;
    }
    
    const courseData = {
        title: document.getElementById('courseTitle').value,
        link: document.getElementById('courseLink').value,
        platform: document.getElementById('coursePlatform').value,
        category: document.getElementById('courseCategory').value,
        difficulty: document.getElementById('courseDifficulty').value,
        priority: document.getElementById('coursePriority').value,
        status: document.getElementById('courseStatus').value,
        tags: document.getElementById('courseTags').value.split(',').map(tag => tag.trim()).filter(tag => tag),
        notes: document.getElementById('courseNotes').value,
        progress: isEdit ? courses.find(c => c.id === parseInt(form.dataset.courseId))?.progress || 0 : 0
    };

    try {
        const url = isEdit ? `/api/courses/${form.dataset.courseId}` : '/api/courses';
        const method = isEdit ? 'PUT' : 'POST';

        const response = await fetch(url, {
            method,
            headers: {
                'Content-Type': 'application/json',
                'X-Username': user.username
            },
            body: JSON.stringify(courseData)
        });

        if (!response.ok) {
            throw new Error('Failed to save course');
        }

        const savedCourse = await response.json();
        
        if (isEdit) {
            // Update existing course in the array
            courses = courses.map(course => 
                course.id === parseInt(form.dataset.courseId) ? savedCourse : course
            );
        } else {
            // Add new course to the beginning of the array
            courses.unshift(savedCourse);
        }

        // Reset form and close modal
        form.reset();
        delete form.dataset.courseId;
        const submitBtn = form.querySelector('button[type="submit"]');
        submitBtn.innerHTML = '<i class="fas fa-plus"></i> Add Course';
        
        displayCourses();
        closeModal('add-course-modal');
        showMessage(isEdit ? 'Course updated successfully!' : 'Course saved successfully!', 'success');
    } catch (error) {
        console.error('Error saving course:', error);
        showMessage('Error saving course: ' + error.message, 'error');
    }
}

async function deleteCourse(courseId) {
    if (!confirm('Are you sure you want to delete this course?')) return;

    try {
        // Get the current user from localStorage
        const user = JSON.parse(localStorage.getItem('user'));
        if (!user) {
            throw new Error('User not authenticated');
        }

        const response = await fetch(`/api/courses/${courseId}`, {
            method: 'DELETE',
            headers: {
                'X-Username': user.username
            }
        });

        if (!response.ok) {
            throw new Error('Failed to delete course');
        }
        
        courses = courses.filter(course => course.id !== courseId);
        displayCourses();
        showMessage('Course deleted successfully', 'success');
    } catch (error) {
        console.error('Error deleting course:', error);
        showMessage('Error deleting course: ' + error.message, 'error');
    }
}

// Notes Management
async function loadNotes() {
    try {
        const user = JSON.parse(localStorage.getItem('user'));
        if (!user) {
            throw new Error('User not authenticated');
        }

        const response = await fetch('/api/notes', {
            headers: {
                'X-Username': user.username,
                'Content-Type': 'application/json'
            }
        });
        
        if (!response.ok) {
            const errorData = await response.json().catch(() => ({}));
            throw new Error(errorData.message || 'Failed to fetch notes');
        }
        
        notes = await response.json();
        displayNotes();
    } catch (error) {
        console.error('Error loading notes:', error);
        showNotification('Error loading notes: ' + error.message, 'error');
    }
}

function renderNotes() {
    const notesList = document.getElementById('notes-list');
    if (!notesList) return;

    notesList.innerHTML = '';
    notes.forEach(note => {
        const noteElement = document.createElement('div');
        noteElement.className = 'note-card';
        noteElement.innerHTML = `
            <h3>${note.title}</h3>
            <p class="note-content">${note.content}</p>
            ${note.course_title ? `<p class="note-course">Course: ${note.course_title}</p>` : ''}
            <p class="note-category">Category: ${note.category}</p>
            <div class="note-tags">${note.tags ? JSON.parse(note.tags).map(tag => `<span class="tag">${tag}</span>`).join('') : ''}</div>
            <div class="note-actions">
                <button onclick="editNote(${note.id})">Edit</button>
                <button onclick="deleteNote(${note.id})">Delete</button>
            </div>
        `;
        notesList.appendChild(noteElement);
    });
}

async function saveNote(event) {
    event.preventDefault();
    const form = event.target;
    const formData = new FormData(form);
    
    try {
        const user = JSON.parse(localStorage.getItem('user'));
        if (!user) {
            throw new Error('User not authenticated');
        }

        // Add files to formData
        const pdfFiles = form.querySelector('input[name="pdf"]').files;
        const imageFiles = form.querySelector('input[name="images"]').files;
        
        Array.from(pdfFiles).forEach(file => {
            formData.append('files', file);
        });
        
        Array.from(imageFiles).forEach(file => {
            formData.append('files', file);
        });

        const noteData = {
            title: formData.get('title'),
            content: formData.get('content'),
            category: formData.get('category'),
            tags: formData.get('tags')?.split(',').map(tag => tag.trim()).filter(tag => tag) || []
        };

        const isEdit = form.dataset.noteId;
        const url = isEdit ? `/api/notes/${form.dataset.noteId}` : '/api/notes';
        const method = isEdit ? 'PUT' : 'POST';

        const response = await fetch(url, {
            method,
            headers: {
                'X-Username': user.username
            },
            body: formData
        });

        if (!response.ok) {
            const errorData = await response.json().catch(() => ({}));
            throw new Error(errorData.message || 'Failed to save note');
        }

        const savedNote = await response.json();
        
        if (isEdit) {
            notes = notes.map(note => note.id === parseInt(form.dataset.noteId) ? savedNote : note);
        } else {
            notes.unshift(savedNote);
        }
        
        renderNotes();
        form.reset();
        delete form.dataset.noteId;
        const modal = document.getElementById('add-note-modal');
        if (modal) {
            modal.classList.add('hidden');
        }
        
        // Reload notes display
        await loadNotes();
        showNotification(isEdit ? 'Note updated successfully!' : 'Note added successfully!', 'success');
    } catch (error) {
        console.error('Error saving note:', error);
        showNotification('Error saving note: ' + error.message, 'error');
    }
}

async function deleteNote(noteId) {
    if (!confirm('Are you sure you want to delete this note?')) return;

    try {
        const user = JSON.parse(localStorage.getItem('user'));
        if (!user) {
            throw new Error('User not authenticated');
        }

        const response = await fetch(`/api/notes/${noteId}`, {
            method: 'DELETE',
            headers: {
                'X-Username': user.username
            }
        });

        if (!response.ok) {
            const errorData = await response.json().catch(() => ({}));
            throw new Error(errorData.message || 'Failed to delete note');
        }

        notes = notes.filter(note => note.id !== noteId);
        renderNotes();
        showNotification('Note deleted successfully', 'success');
    } catch (error) {
        console.error('Error deleting note:', error);
        showNotification('Error deleting note: ' + error.message, 'error');
    }
}

function editNote(noteId) {
    const note = notes.find(n => n.id === noteId);
    if (!note) return;

    const form = document.getElementById('add-note-form');
    if (!form) return;

    form.dataset.noteId = noteId;
    form.elements.title.value = note.title;
    form.elements.content.value = note.content;
    form.elements.course_id.value = note.course_id || '';
    form.elements.category.value = note.category;
    form.elements.tags.value = note.tags ? JSON.parse(note.tags).join(', ') : '';

    // Show modal if it exists
    const modal = document.getElementById('add-note-modal');
    if (modal) modal.style.display = 'block';
}

// Add event listeners for notes
document.addEventListener('DOMContentLoaded', () => {
    const addNoteForm = document.getElementById('add-note-form');
    if (addNoteForm) {
        addNoteForm.addEventListener('submit', saveNote);
    }

    const addNoteBtn = document.getElementById('add-note-btn');
    if (addNoteBtn) {
        addNoteBtn.addEventListener('click', () => {
            const modal = document.getElementById('add-note-modal');
            if (modal) {
                modal.style.display = 'block';
                const form = document.getElementById('add-note-form');
                if (form) {
                    form.reset();
                    delete form.dataset.noteId;
                }
            }
        });
    }

    // Close modal when clicking outside
    window.addEventListener('click', (event) => {
        const modal = document.getElementById('add-note-modal');
        if (modal && event.target === modal) {
            modal.style.display = 'none';
        }
    });
});

// Add this function near the top with other utility functions
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.innerHTML = `
        <div class="notification-content">
            <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'}"></i>
            <span>${message}</span>
        </div>
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.classList.add('show');
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => {
                notification.remove();
            }, 300);
        }, 3000);
    }, 100);
}

// Reminder Functions
function openReminderModal() {
    const modal = document.getElementById('reminder-modal');
    if (modal) {
        modal.classList.remove('hidden');
    }
}

function closeReminderModal() {
    const modal = document.getElementById('reminder-modal');
    if (modal) {
        modal.classList.add('hidden');
    }
}

async function saveReminder(event) {
    event.preventDefault();
    
    try {
        const user = JSON.parse(localStorage.getItem('user'));
        if (!user) {
            throw new Error('User not authenticated');
        }

        const form = event.target;
        const title = form.querySelector('input[name="title"]').value;
        const datetime = form.querySelector('input[name="datetime"]').value;
        const description = form.querySelector('textarea[name="description"]').value;

        if (!title || !datetime) {
            throw new Error('Please fill in all required fields');
        }

        const reminder = {
            title,
            datetime,
            description,
            userId: user.username,
            completed: false
        };

        const response = await fetch('/api/reminders', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-Username': user.username
            },
            body: JSON.stringify(reminder)
        });

        if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.message || 'Failed to save reminder');
        }

        const savedReminder = await response.json();
        
        // Schedule notification for the new reminder
        scheduleNotification(savedReminder);
        
        // Close the modal and show success message
        closeReminderModal();
        showNotification('Reminder set successfully!', 'success');
        
        // Reload reminders list
        await loadReminders();
        
        // Reset the form
        form.reset();
        
    } catch (error) {
        console.error('Error saving reminder:', error);
        showNotification(error.message || 'Failed to save reminder', 'error');
    }
}

async function loadReminders() {
    try {
        const user = JSON.parse(localStorage.getItem('user'));
        if (!user) {
            throw new Error('User not authenticated');
        }

        const response = await fetch('/api/reminders', {
            headers: {
                'X-Username': user.username
            }
        });

        if (!response.ok) {
            throw new Error('Failed to load reminders');
        }

        const reminders = await response.json();
        
        // Display reminders in the list
        const remindersList = document.getElementById('reminders-list');
        if (remindersList) {
            if (reminders.length === 0) {
                remindersList.innerHTML = '<div class="no-reminders">No reminders set</div>';
            } else {
                remindersList.innerHTML = reminders.map(reminder => `
                    <div class="reminder-card">
                        <h3>${reminder.title}</h3>
                        <div class="datetime">${new Date(reminder.datetime).toLocaleString()}</div>
                        <div class="description">${reminder.description || 'No description'}</div>
                        <div class="actions">
                            <button class="btn-secondary" onclick="deleteReminder(${reminder.id})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                `).join('');
            }
        }
        
        // Schedule notifications for active reminders
        reminders.forEach(reminder => {
            if (!reminder.completed && new Date(reminder.datetime) > new Date()) {
                scheduleNotification(reminder);
            }
        });

        return reminders;
    } catch (error) {
        console.error('Error loading reminders:', error);
        showNotification('Error loading reminders: ' + error.message, 'error');
        return [];
    }
}

function scheduleNotification(reminder) {
    const reminderTime = new Date(reminder.datetime);
    const now = new Date();
    
    if (reminderTime <= now) {
        return; // Don't schedule if the time has already passed
    }

    const timeUntilReminder = reminderTime.getTime() - now.getTime();
    
    // Schedule the notification
    setTimeout(async () => {
        try {
            // Show the notification
            showReminderNotification(reminder);
            
            // Mark the reminder as completed in the database
            const user = JSON.parse(localStorage.getItem('user'));
            if (user) {
                await fetch(`/api/reminders/${reminder.id}/complete`, {
                    method: 'PUT',
                    headers: {
                        'X-Username': user.username
                    }
                });
            }
        } catch (error) {
            console.error('Error handling reminder notification:', error);
        }
    }, timeUntilReminder);
}

function showReminderNotification(reminder) {
    // Play notification sound
    notificationSound.play().catch(error => console.log('Error playing sound:', error));

    // Show browser notification
    new Notification('Study Reminder', {
        body: reminder.title,
        icon: '/images/avatar.jpeg'
    });

    // Show in-app notification
    showNotification(`Reminder: ${reminder.title}`, 'info');
}

// Pomodoro Timer Functions
function openPomodoroTimer() {
    document.getElementById('pomodoro-modal').classList.remove('hidden');
    resetTimer();
}

function closePomodoroTimer() {
    document.getElementById('pomodoro-modal').classList.add('hidden');
    resetTimer();
}

function startTimer() {
    if (!timerInterval) {
        const startBtn = document.querySelector('.timer-controls button:first-child');
        const pauseBtn = document.querySelector('.timer-controls button:nth-child(2)');
        
        startBtn.style.display = 'none';
        pauseBtn.style.display = 'inline-flex';
        
        timerInterval = setInterval(updateTimer, 1000);
        isRunning = true;
    }
}

function pauseTimer() {
    if (timerInterval) {
        const startBtn = document.querySelector('.timer-controls button:first-child');
        const pauseBtn = document.querySelector('.timer-controls button:nth-child(2)');
        
        startBtn.style.display = 'inline-flex';
        pauseBtn.style.display = 'none';
        
        clearInterval(timerInterval);
        timerInterval = null;
        isRunning = false;
    }
}

function resetTimer() {
    pauseTimer();
    studyDuration = parseInt(document.getElementById('study-duration').value) || 25;
    breakDuration = parseInt(document.getElementById('break-duration').value) || 5;
    timeLeft = isBreak ? breakDuration * 60 : studyDuration * 60;
    updateTimerDisplay();
}

function updateTimer() {
    if (timeLeft > 0) {
        timeLeft--;
        updateTimerDisplay();
    } else {
        clearInterval(timerInterval);
        timerInterval = null;
        isRunning = false;
        const startBtn = document.querySelector('.timer-controls button:first-child');
        const pauseBtn = document.querySelector('.timer-controls button:nth-child(2)');
        
        startBtn.style.display = 'inline-flex';
        pauseBtn.style.display = 'none';
        
        isBreak = !isBreak;
        timeLeft = isBreak ? breakDuration * 60 : studyDuration * 60;
        updateTimerDisplay();
        playNotification();
    }
}

function updateTimerDisplay() {
    const hours = Math.floor(timeLeft / 3600);
    const minutes = Math.floor((timeLeft % 3600) / 60);
    const seconds = timeLeft % 60;

    document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
    document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
    document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
}

function playNotification() {
    // Play timer sound
    timerSound.play().catch(error => console.log('Error playing sound:', error));

    // Show browser notification
    if (Notification.permission === 'granted') {
        new Notification('Pomodoro Timer', {
            body: isBreak ? 'Break time is over! Time to study!' : 'Study time is over! Take a break!',
            icon: '/images/avatar.jpeg'
        });
    }

    // Show in-app notification
    showNotification(isBreak ? 'Break time is over! Time to study!' : 'Study time is over! Take a break!', 'info');
}

// Add event listeners for timer settings
document.addEventListener('DOMContentLoaded', function() {
    const studyDurationInput = document.getElementById('study-duration');
    const breakDurationInput = document.getElementById('break-duration');

    if (studyDurationInput && breakDurationInput) {
        studyDurationInput.addEventListener('change', function() {
            if (!isRunning) {
                studyDuration = parseInt(this.value) || 25;
                if (!isBreak) {
                    timeLeft = studyDuration * 60;
                    updateTimerDisplay();
                }
            }
        });

        breakDurationInput.addEventListener('change', function() {
            if (!isRunning) {
                breakDuration = parseInt(this.value) || 5;
                if (isBreak) {
                    timeLeft = breakDuration * 60;
                    updateTimerDisplay();
                }
            }
        });
    }
});

// Add event listener for the reminder form
document.addEventListener('DOMContentLoaded', function() {
    const reminderForm = document.getElementById('reminder-form');
    if (reminderForm) {
        reminderForm.addEventListener('submit', saveReminder);
    }
});

// Add function to delete reminders
async function deleteReminder(reminderId) {
    if (!confirm('Are you sure you want to delete this reminder?')) return;

    try {
        const user = JSON.parse(localStorage.getItem('user'));
        if (!user) {
            throw new Error('User not authenticated');
        }

        const response = await fetch(`/api/reminders/${reminderId}`, {
            method: 'DELETE',
            headers: {
                'X-Username': user.username
            }
        });

        if (!response.ok) {
            throw new Error('Failed to delete reminder');
        }

        showNotification('Reminder deleted successfully', 'success');
        await loadReminders(); // Reload the reminders list
    } catch (error) {
        console.error('Error deleting reminder:', error);
        showNotification('Error deleting reminder: ' + error.message, 'error');
    }
}

// Update the sendMessage function to work with the new chat interface
async function sendMessage() {
    const input = document.getElementById('chat-input');
    const message = input.value.trim();
    if (!message) return;

    // Add user message to chat
    addMessageToChat(message, 'user');
    input.value = '';

    try {
        // Simulate AI response (replace with actual API call)
        const response = await simulateAIResponse(message);
        addMessageToChat(response, 'ai');
    } catch (error) {
        console.error('Error getting AI response:', error);
        addMessageToChat('Sorry, I encountered an error. Please try again.', 'ai');
    }
}

// Platforms Functions
async function loadPlatforms(category = 'all') {
    try {
        const username = localStorage.getItem('username');
        if (!username) {
            showNotification('Please log in to view platforms', 'error');
            return;
        }

        const response = await fetch(`/api/platforms?category=${category}`, {
            headers: {
                'x-username': username
            }
        });

        if (!response.ok) {
            throw new Error('Failed to load platforms');
        }

        const platforms = await response.json();
        displayPlatforms(platforms);
    } catch (error) {
        console.error('Error loading platforms:', error);
        showNotification('Error loading platforms', 'error');
    }
}

function displayPlatforms(platforms) {
    const platformsGrid = document.getElementById('platformsGrid');
    platformsGrid.innerHTML = '';

    platforms.forEach(platform => {
        const card = document.createElement('div');
        card.className = 'platform-card';
        
        const iconClass = getPlatformIcon(platform.category);
        
        card.innerHTML = `
            <i class="${iconClass} platform-icon"></i>
            <button class="favorite-btn" onclick="toggleFavorite(${platform.id})">
                <i class="fas ${platform.is_favorite ? 'fa-star' : 'fa-star-o'}"></i>
            </button>
            <h3>${platform.platform_name}</h3>
            <a href="${platform.platform_url}" target="_blank" class="platform-link">
                Visit Platform <i class="fas fa-external-link-alt"></i>
            </a>
        `;
        
        platformsGrid.appendChild(card);
    });
}

function getPlatformIcon(category) {
    const icons = {
        'coding': 'fas fa-code',
        'professional': 'fas fa-briefcase',
        'learning': 'fas fa-graduation-cap',
        'documentation': 'fas fa-book',
        'ai_tools': 'fas fa-robot'
    };
    return icons[category] || 'fas fa-globe';
}

async function toggleFavorite(platformId) {
    try {
        const username = localStorage.getItem('username');
        if (!username) {
            showNotification('Please log in to manage favorites', 'error');
            return;
        }

        const response = await fetch(`/api/platforms/${platformId}/favorite`, {
            method: 'POST',
            headers: {
                'x-username': username
            }
        });

        if (!response.ok) {
            throw new Error('Failed to update favorite status');
        }

        const result = await response.json();
        if (result.success) {
            loadPlatforms(document.querySelector('.btn-filter.active').dataset.category);
            showNotification('Favorite status updated', 'success');
        }
    } catch (error) {
        console.error('Error updating favorite:', error);
        showNotification('Error updating favorite status', 'error');
    }
}

// Contests Functions
async function loadContests() {
    try {
        const response = await fetch('https://kontests.net/api/v1/all');
        if (!response.ok) {
            throw new Error('Failed to load contests');
        }

        const contests = await response.json();
        displayContests(contests);
    } catch (error) {
        console.error('Error loading contests:', error);
        showNotification('Error loading contests', 'error');
    }
}

function displayContests(contests) {
    const contestsGrid = document.getElementById('contestsGrid');
    contestsGrid.innerHTML = '';

    const upcomingContests = contests
        .filter(contest => new Date(contest.start_time) > new Date())
        .sort((a, b) => new Date(a.start_time) - new Date(b.start_time))
        .slice(0, 6);

    upcomingContests.forEach(contest => {
        const startTime = new Date(contest.start_time);
        const duration = parseInt(contest.duration) / 3600; // Convert to hours

        const card = document.createElement('div');
        card.className = 'contest-card';
        card.innerHTML = `
            <h4>${contest.name}</h4>
            <div class="contest-details">
                <div class="contest-detail">
                    <i class="far fa-calendar"></i>
                    <span>${startTime.toLocaleDateString()}</span>
                </div>
                <div class="contest-detail">
                    <i class="far fa-clock"></i>
                    <span>${startTime.toLocaleTimeString()}</span>
                </div>
                <div class="contest-detail">
                    <i class="fas fa-hourglass-half"></i>
                    <span>${duration} hours</span>
                </div>
                <div class="contest-detail">
                    <i class="fas fa-code"></i>
                    <span>${contest.site}</span>
                </div>
            </div>
            <a href="${contest.url}" target="_blank" class="contest-link">
                View Contest <i class="fas fa-external-link-alt"></i>
            </a>
        `;
        contestsGrid.appendChild(card);
    });
}

// Event Listeners for Platforms
document.querySelectorAll('.btn-filter').forEach(button => {
    button.addEventListener('click', () => {
        document.querySelectorAll('.btn-filter').forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        loadPlatforms(button.dataset.category);
    });
});

// Load platforms and contests when the platforms section is shown
document.querySelector('[data-section="platforms-content"]').addEventListener('click', () => {
    loadPlatforms();
    loadContests();
});

// ... rest of the existing code ... 

// Modal Functions
function openModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.classList.remove('hidden');
    }
}

function closeModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.classList.add('hidden');
    }
}

const coursesRouter = require('./routes/courses');
app.use('/api/courses', coursesRouter);</script>
</body>
</html> 
